--重复输入该代码不会产生额外影响。多次Wrap、Unwrap不会额外生效。
--Wrap()启用安全包装，Unwrap()关闭安全包装。
--CLM()删除所有匿名模组的回调。
l if not(_CW)then local D,E,F,I,J,M,O,P,Y,W,A,B,C,G,H,K,L,N,Q,R=require'debug',{},'Function',Isaac,'Callback','Mod',{},pairs,true,{}_CW,A,B,C,G,K,N,Q,R=Y,D.getlocal,D.setlocal,D.sethook,I.GetCallbacks,'Run'..J,'Remove'..J,function(i,o)E[i]=Y for _,m in P(G(i))do o=m[F]if not W[o]then m[F]=O[o]or R(o)end end end,function(f,r)r=function(...)local s={pcall(f,...)}if s[1]then return table.unpack(s,2)end end O[f],W[r]=r,f return r end L=function(i)_,i=A(3,i)if not E[i]then Q(i)end end for _,i in P(ModCallbacks)do E[i]=Y end function Wrap()if not H then for i,_ in P(E)do Q(i)end C(function(a)a=D.getinfo(2,'f').func if a==I['AddPriority'..J]then _,a=A(2,4)L(2)if not W[a]then B(2,4,O[a]or R(a))end elseif a==I[N]then _,a=A(2,3)L(2)if not W[a]then B(2,3,O[a]or a)end elseif a==I[K]or a==I[K..'WithParam']or a==G then L(1)end end,'c')H=Y end end function Unwrap()if H then C()for i,_ in P(E)do for _,m in P(G(i))do m[F]=W[m[F]]or m[F]end end O,W,H={},{}end end function CLM(t,m)for i,_ in P(E)do t=G(i)for x=#t,1,-1 do m=t[x][M]if not(m and m.Name)then I[N](m,i,t[x][F])end end end end end