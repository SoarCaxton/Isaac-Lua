<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>以撒代码挑战 - Keye3Tuido</title>
    <style>
        body {
            font-family: Consolas, sans-serif;
            background: #f5f7fa;
            margin: 20px;
        }
        .container {
            max-width: 1100px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px #0001;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 12px;
        }
        .file-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .file-row {
            display: grid;
            grid-template-columns: 60px 1fr;
            align-items: center;
        }
        .file-num {
            text-align: center;
            color: #7f8c8d;
            font-weight: bold;
        }
        .file-title {
            padding: 8px;
            background: #ecf0f1;
            border-radius: 6px;
            text-decoration: none;
            color: #2c3e50;
            display: block;
        }
        .file-title:hover {
            background: #3498db;
            color: #fff;
        }
        .code-box {
            display: grid;
            grid-template-columns: max-content 1fr;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: auto;
            font-size: 14px;
            line-height: 1.6;
        }
        .col-ln, .col-code {
            display: grid;
            grid-auto-rows: minmax(1.6em, auto);
        }
        .col-ln {
            text-align: right;
            padding: 12px 10px;
            color: #7f8c8d;
            user-select: none;
            border-right: 1px solid #e0e0e0;
        }
        .col-code {
            padding: 12px 15px;
            white-space: pre;
        }
        .row.comment {
            font-weight: 500;
        }
        .col-ln .row:hover, .col-code .row:hover {
            background: #eef;
            color: #3498db;
            cursor: pointer;
        }
        .legend {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 8px;
            text-align: right;
        }
        .button-group {
            display: flex;
            gap: 8px;
        }
        .button-group button {
            padding: 8px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: .15s;
        }
        .copy-btn {
            background: #3498db;
            color: #fff;
        }
        .copy-btn:hover {
            background: #2b82c6;
        }
        .download-btn {
            background: #2ecc71;
            color: #fff;
        }
        .download-btn:hover {
            background: #27b866;
        }
        .back-btn {
            background: #95a5a6;
            color: #fff;
        }
        .back-btn:hover {
            background: #7f8c8d;
        }
        #toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #333;
            color: #fff;
            padding: 6px 10px;
            border-radius: 5px;
            opacity: 0;
            transition: .3s;
            pointer-events: none;
            display: none;
        }
        #searchInput {
            padding: 6px;
            width: 70%;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin: 10px auto;
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>以撒代码挑战</h1>
        <div id="home">
            <input id="searchInput" placeholder="搜索Lua文件..." oninput="handleSearch()">
            <div id="fileList" class="file-list"><div class='file-row' data-search='0 实用代码合辑'><span class='file-num'>0</span><a href='#' onclick="showFile('0.实用代码合辑.lua')" class='file-title'>实用代码合辑</a></div>
<div class='file-row' data-search='1 御灵术'><span class='file-num'>1</span><a href='#' onclick="showFile('1.御灵术.lua')" class='file-title'>御灵术</a></div>
<div class='file-row' data-search='2 糖梅联萌'><span class='file-num'>2</span><a href='#' onclick="showFile('2.糖梅联萌.lua')" class='file-title'>糖梅联萌</a></div>
<div class='file-row' data-search='3 丢雷佬'><span class='file-num'>3</span><a href='#' onclick="showFile('3.丢雷佬.lua')" class='file-title'>丢雷佬</a></div>
<div class='file-row' data-search='4 雷雨'><span class='file-num'>4</span><a href='#' onclick="showFile('4.雷雨.lua')" class='file-title'>雷雨</a></div>
<div class='file-row' data-search='5 烂醉如泥'><span class='file-num'>5</span><a href='#' onclick="showFile('5.烂醉如泥.lua')" class='file-title'>烂醉如泥</a></div>
<div class='file-row' data-search='6 洒洒水啦~'><span class='file-num'>6</span><a href='#' onclick="showFile('6.洒洒水啦~.lua')" class='file-title'>洒洒水啦~</a></div>
<div class='file-row' data-search='7 天降酸雨'><span class='file-num'>7</span><a href='#' onclick="showFile('7.天降酸雨.lua')" class='file-title'>天降酸雨</a></div>
<div class='file-row' data-search='8 世界是最强的替身'><span class='file-num'>8</span><a href='#' onclick="showFile('8.世界是最强的替身.lua')" class='file-title'>世界是最强的替身</a></div>
<div class='file-row' data-search='9 绯红之王'><span class='file-num'>9</span><a href='#' onclick="showFile('9.绯红之王.lua')" class='file-title'>绯红之王</a></div>
<div class='file-row' data-search='10 天堂制造'><span class='file-num'>10</span><a href='#' onclick="showFile('10.天堂制造.lua')" class='file-title'>天堂制造</a></div>
<div class='file-row' data-search='11 异食游戏'><span class='file-num'>11</span><a href='#' onclick="showFile('11.异食游戏.lua')" class='file-title'>异食游戏</a></div>
<div class='file-row' data-search='12 永远迷失'><span class='file-num'>12</span><a href='#' onclick="showFile('12.永远迷失.lua')" class='file-title'>永远迷失</a></div>
<div class='file-row' data-search='13 饕餮'><span class='file-num'>13</span><a href='#' onclick="showFile('13.饕餮.lua')" class='file-title'>饕餮</a></div>
<div class='file-row' data-search='14 突击考试'><span class='file-num'>14</span><a href='#' onclick="showFile('14.突击考试.lua')" class='file-title'>突击考试</a></div>
<div class='file-row' data-search='15 勇往直前'><span class='file-num'>15</span><a href='#' onclick="showFile('15.勇往直前.lua')" class='file-title'>勇往直前</a></div>
<div class='file-row' data-search='16 投币攻击'><span class='file-num'>16</span><a href='#' onclick="showFile('16.投币攻击.lua')" class='file-title'>投币攻击</a></div>
<div class='file-row' data-search='17 寂'><span class='file-num'>17</span><a href='#' onclick="showFile('17.寂.lua')" class='file-title'>寂</a></div>
<div class='file-row' data-search='18 自选双子'><span class='file-num'>18</span><a href='#' onclick="showFile('18.自选双子.lua')" class='file-title'>自选双子</a></div>
<div class='file-row' data-search='19 网络延迟'><span class='file-num'>19</span><a href='#' onclick="showFile('19.网络延迟.lua')" class='file-title'>网络延迟</a></div>
<div class='file-row' data-search='20 风雨交加'><span class='file-num'>20</span><a href='#' onclick="showFile('20.风雨交加.lua')" class='file-title'>风雨交加</a></div>
<div class='file-row' data-search='21 现代战争'><span class='file-num'>21</span><a href='#' onclick="showFile('21.现代战争.lua')" class='file-title'>现代战争</a></div>
<div class='file-row' data-search='22 快刀游戏'><span class='file-num'>22</span><a href='#' onclick="showFile('22.快刀游戏.lua')" class='file-title'>快刀游戏</a></div></div>
        </div>
        <div id="detail" style="display:none;flex-direction:column;gap:10px;">
            <h2 id="fileTitle"></h2>
            <div class="code-box">
                <div class="col-ln" id="lineNumbers"></div>
                <div class="col-code" id="codeLines"></div>
            </div>
            <div class="legend"><span id="subLegend"></span></div>
            <div class="button-group">
                <button onclick="copyToClipboard()" class="copy-btn">复制到剪贴板</button>
                <button onclick="downloadLua()" class="download-btn">下载lua文件</button>
                <button onclick="showHome()" class="back-btn">返回主页</button>
            </div>
            <div id="toast"></div>
        </div>
    </div>
    <script>
        const files = {"0.实用代码合辑.lua": {"raw": "-- 实用代码合辑\n\n--1. 开启当前层、当前维度，所有能打开的红房间\nl local S,D,G,E,L,R,T,C,P,O,m,x='SafeGridIndex','Data','GetRoomByIdx','GetRooms',Game():GetLevel(),{}T=L[E](L)C,O=#T,function(r,i,d)i,d=r[S],r[D] and r[D].Doors for j=0,7 do if(not d or d&1==1)then L:MakeRedRoomDoor(i,j)L:UncoverHiddenDoor(i,j)end d=d and d>>1 end R[i]=true r.DisplayFlags=4 end O(L[G](L,L:GetCurrentRoomDesc()[S]))while P~=C do P=C for i=1,C do m=T:Get(i-1)x=m[S]m=L[G](L,x,N)if not R[x]then O(m)end end T=L[E](L)C=#T end L:UpdateVisibility()\n\n--2. 长按道具键/副手键1s以上=连续多次按键\nl local A,M,H,B,K,G=Isaac.AddCallback,ModCallbacks,GetPtrHash,ButtonAction,{'ACTION_ITEM','ACTION_PILLCARD'},{M={}}A(G.M,M.MC_POST_PLAYER_RENDER,function(_,p)local k,n,a=H(p)G[k]=G[k]or{}n=G[k]for _,b in pairs(K)do a=B[b]if Input.IsActionPressed(a,p.ControllerIndex)then n[a]=n[a]or Isaac.GetTime()else n[a]=nil end end end)A(G.M,M.MC_INPUT_ACTION,function(_,e,_,a)e=e and e:ToPlayer()if e then local k,t,s=H(e),Isaac.GetTime()s=G[k]and G[k][a]if s and s<t then return t>1e3+s end end end,InputHook.IS_ACTION_TRIGGERED)A(G.M,M.MC_POST_ENTITY_REMOVE,function(_,e)G[H(e)]=nil end,EntityType.ENTITY_PLAYER)\n\n--3. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nl Isaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--4. 强制给予玩家道具590(水星)、3x道具649(甜甜糖梅宝)。\nl Isaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({590,{649,3}})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n\n--5. 从游戏中移除捐款机\nl Isaac.AddCallback({},18,function()Game():SetStateFlag(17,true)end)\n\n--6. 从游戏中移除饰品85(业报)。\nl local G,F,b=32768,Isaac.AddCallback,{85}F({},31,function(_,p)for _,i in pairs(b)do if p:HasTrinket(i)then p:TryRemoveTrinket(i)end end end)F({},37,function(_,f,v,s)if v==350 then repeat f=1 for _,i in pairs(b)do if i|G==s|G then f,s=0,s&G|Game():GetItemPool():GetTrinket()break end end until f>0 return{v,s}end end)\n\n--7. 每开启新游戏时，在初始房间根据玩家人数n，生成n组多选一道具(87-洛基的角,229-萌死戳的肺,233-小小星球)\nl local V,g,N=Vector,{87,229,233}Isaac.AddCallback({},15,function(_,c)local n,x,y=Game():GetNumPlayers()if not c then x,y=(720-#g*80)/2,(640-n*80)/2 for i=1,n do for j=1,#g do Isaac.Spawn(5,100,g[j],V(x+80*(j-1),y),V.Zero,N):ToPickup().OptionsPickupIndex=i end y=y+80 end end end)\n\n--8.  从游戏中移除道具329(鲁多维科科技)和579(英灵剑)\nl local I,C,Y,T,A=Isaac,{329,579},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n\n--9. [不适配手柄]禁止玩家暂停游戏、禁止使用控制台(忏悔+不生效)；可使用Esc返回游戏菜单\nl local A,B,M,T,O,P=Isaac.AddCallback,ButtonAction,ModCallbacks,{},Options,'PauseOnFocusLost'A(T,M.MC_POST_RENDER,function()O[P]=false for i=1,Game():GetNumPlayers()do local c=Isaac.GetPlayer(i-1).ControllerIndex if Input.IsActionPressed(B.ACTION_MENUBACK,c)then Game():Fadeout(1,2)end end end)A(T,M.MC_INPUT_ACTION,function(_,_,h,b)if b==B.ACTION_CONSOLE or b==B.ACTION_PAUSE then return h==InputHook.GET_ACTION_VALUE and 0 or false end end)A(T,M.MC_PRE_MOD_UNLOAD,function()O[P]=true end)\n\n--10. 死亡证明内的道具、任务道具之外的所有道具均被替换为饰品掉落；角色受伤时自动吃掉携带的饰品\nl local F,G=Isaac.AddCallback,Game()F({},11,function(_,e)e:ToPlayer():UseActiveItem(479,3339)SFXManager():Play(157)end,1)F({},37,function(_,_,v,s)if(v==100 and not Isaac.GetItemConfig():GetCollectible(s):HasTags(1<<15)and G:GetLevel():GetCurrentRoomDesc().Data.Name~='Death Certificate')then return{350,G:GetItemPool():GetTrinket()}end end)\n\n--11. 初始给予玩家道具116(9伏特)、9*311(犹大的影子)、356(车载电池)、468(阴影)、619(长子权)。\nl local I,G=Isaac,Game()I.AddCallback({},15,function(p,c,t,n)if not c then for _,i in pairs({116,{311,9},356,468,619})do for k=1,G:GetNumPlayers()do p,t,n=I.GetPlayer(k-1),table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(t)do p:AddCollectible(t,I.GetItemConfig():GetCollectible(t).InitCharge)end end G:GetItemPool():RemoveCollectible(t)end end end)\n\n--12. 免疫失忆症、免疫迷途诅咒。\nl local F=Isaac.AddCallback F({},10,function()Game():GetLevel():RemoveCurses(4)end,25)F({},12,function(_,c)return ~4&c end)\n\n--13. 强制给予玩家饰品140(所多玛之果)。\nl Isaac.AddCallback({},31,function(a,p,b)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then b='Parent'a=p[b]p[b]=nil for _,i in pairs({140})do if not p:HasTrinket(i)then p:DropTrinket(p.Position+p.PositionOffset,true)p:AddTrinket(i)p:UseActiveItem(479,3339)end end p[b]=a end end)\n\n--14. 从游戏中移除符文41(黑符文)、卡牌74(月亮?)和魂石83(该隐的魂石)。\nl local b,Y,N,F,G={41,74,83},true,false,Isaac.AddCallback,Game()F({},31,function(_,p)for _,i in pairs(b)do for s=0,3 do if p:GetCard(s)==i then p:SetCard(s,0)end end end end)F({},37,function(r,f,v,s)if v==300 then repeat f=Y for _,i in pairs(b)do if i==s then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetCardRNG(REPENTANCE_PLUS and -1 or 0)s=G:GetItemPool():GetCard(r:GetSeed(),Y,Y,N)r:Next()break end end until f return{v,s}end end)\n\n--15. 从游戏中移除药丸23(我能永远看清)。\nl local b,Y,N,F,G,P,E,L,T={23},true,false,Isaac.AddCallback,Game(),'GetItemPool','GetPillEffect','GetPill',{}F(T,31,function(_,p,o)o=G[P](G)for _,i in pairs(b)do for s=0,3 do if o[E](o,p[L](p,s),p)==i then p:SetPill(s,0)end end end end)F(T,37,function(p,f,v,s,r)p=G[P](G)if v==70 then repeat f=Y for _,i in pairs(b)do if i==p[E](p,s)then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetPillRNG(REPENTANCE_PLUS and -1 or 0)s=p[L](p,r:GetSeed())r:Next()break end end until f return{v,s}end end)\n\n--16. 强制敌人变为精英怪(不包括6无敌变种和25彩虹变种，“0”和“1”可替换为非负整数表示权重)。\nl local A,C={[0]=1,[1]=1,[2]=1,[3]=1,[4]=1,[5]=1,[6]=0,[7]=1,[8]=1,[9]=1,[10]=1,[11]=1,[12]=1,[13]=1,[14]=1,[15]=1,[16]=1,[17]=1,[18]=1,[19]=1,[20]=1,[21]=1,[22]=1,[23]=1,[24]=1,[25]=0},{}for k,v in pairs(A)do for _=1,v do C[#C+1]=k end end Isaac.AddCallback({}, ModCallbacks.MC_NPC_UPDATE, function(_,e)if e:IsVulnerableEnemy()and e:IsActiveEnemy(false)and not e:IsBoss()and not e:IsInvincible() and not e:IsChampion()then e:MakeChampion(e.InitSeed,C[e.InitSeed%#C+1])end end)\n\n--17. 黏币变为镍币\nl Isaac.AddCallback({},ModCallbacks.MC_POST_PICKUP_INIT,function(_,p)if p.SubType==CoinSubType.COIN_STICKYNICKEL then p:Morph(p.Type,p.Variant,CoinSubType.COIN_NICKEL,true)end end,PickupVariant.PICKUP_COIN)\n\n--18. 角色吸引硬币\nl Isaac.AddCallback({},ModCallbacks.MC_POST_PICKUP_UPDATE,function(_,p)local e,l=Game():GetNearestPlayer(p.Position+p.PositionOffset)l=e.Position+e.PositionOffset-p.Position-p.PositionOffset p.Velocity=3*(l:Length()>10 and math.log(l:Length())or 0)*l:Normalized()p.GridCollisionClass=EntityGridCollisionClass.GRIDCOLL_NONE end,PickupVariant.PICKUP_COIN)\n\n--19. 非任务道具替换为以下道具之一：道具36(大便)、道具74(25美分)、道具667(稻草人)\nl local I,C=Isaac,{36,74,667}I.AddCallback({},ModCallbacks.MC_POST_PICKUP_INIT,function(_,p)local s=p.SubType if not I.GetItemConfig():GetCollectible(s):HasTags(ItemConfig.TAG_QUEST)then for _,v in pairs(C)do if v==s then return end end local r=RNG()r:SetSeed(p.InitSeed,35)p:Morph(p.Type,p.Variant,C[r:RandomInt(#C)+1],true,true)end end,PickupVariant.PICKUP_COLLECTIBLE)\n\n--20. 强制角色为游魂。\nl Isaac.AddCallback({},ModCallbacks.MC_POST_PLAYER_UPDATE,function(_,p)local t=PlayerType.PLAYER_THELOST if t~=p:GetPlayerType()then p:ChangePlayerType(t)end end)\n\n--21. 用于储存数据，无实际效果（兼容发光沙漏，不兼容rewind）\n--_Data()返回的数据兼容发光沙漏,_Data(entity)=entity:GetData(),_rew()返回当前是否处于rew状态（不更新数据）,_Pata()返回的数据仅在游戏结束时重置;rewind会触发游戏结束和游戏开始。\nl local I,M,N,H,T,F,D,A=Isaac,ModCallbacks,'MC_POST_NEW_ROOM',function(e)return e.InitSeed end,true,false D,A={B={},D={},T={},R=F,C=F,G=F,M={}},function(S,...)I.AddPriorityCallback(D.M,S,CallbackPriority.IMPORTANT,...)end local function C(s)if type(s)=='table'then local c={}for k,v in pairs(s)do c[k]=C(v)end return c end return s end A(M.MC_USE_ITEM,function()D.T=C(D.B)D.R,D.C=T,F end,CollectibleType.COLLECTIBLE_GLOWING_HOUR_GLASS)A(M[N],function()if not D.G then D.G=T return end if D.R then if D.C then D.R=F end D.C=not D.C end if not D.R then D.B=C(D.T)end end)A(M.MC_POST_GAME_STARTED,function(_,c)D.R,D.C=F,F if c then D.T=C(D.B)else D.T,D.B,D.D={},{},{}end I.RunCallback(M[N])end)A(M.MC_PRE_GAME_EXIT,function(_,d)if d then D.B=C(D.T)else D.D,D.B={},{}end D.R,D.C,D.G,D.T=F,F,F,{}end)A(M.MC_POST_ENTITY_REMOVE,function(_,e)D.T[H(e)]=nil end)function _Data(e)if e then local k=H(e)D.T[k]=D.T[k]or{}return D.T[k]end return D.T end function _rew()return D.R end function _Pata()return D.D end\n\n--22. 固定开启下列彩蛋种子：G_FUEL。\nl local S={SeedEffect.SEED_G_FUEL}Isaac.AddCallback({},ModCallbacks.MC_POST_UPDATE,function()local D,f=Game():GetSeeds()for _,d in pairs(S)do if D:CanAddSeedEffect(d)then D:AddSeedEffect(d)f=true end end if f then Isaac.ExecuteCommand('restart')end end)\n\n--23. 角色的下列属性不会超出限定的值（nil表示不做限制）：移速(nil~2.00)；弹速(nil~3.00)\nl local A,M,V,T,E=Isaac.AddCallback,ModCallbacks,{['MoveSpeed']={min=nil,max=2.00,F='SPEED'},['MaxFireDelay']={min=nil,max=nil,F='FIREDELAY'},['Damage']={min=nil,max=nil,F='DAMAGE'},['TearRange']={min=nil,max=nil,F='RANGE'},['ShotSpeed']={min=nil,max=3.00,F='SHOTSPEED'},['Luck']={min=nil,max=nil,F='LUCK'},['SpriteScale']={min=nil,max=nil,F='SIZE'}},{}E=function(p,k,v)local l,r=v.min,v.max if l and l>p[k]then p[k]=l end if r and r<p[k]then p[k]=r end end A(T,M.MC_EVALUATE_CACHE,function(_,p,f)for k,v in pairs(V)do if f==CacheFlag['CACHE_'..v.F]then return E(p,k,v)end end end)A(T,M.MC_POST_PEFFECT_UPDATE,function(_,p)for k,v in pairs(V)do E(p,k,v)end end)\n\n--24. 取消屏幕晃动\nl Isaac.AddCallback({},ModCallbacks.MC_POST_UPDATE,function()Game():ShakeScreen(0)end)\n--.", "cleaned": "-- 实用代码合辑\n\n--1. 开启当前层、当前维度，所有能打开的红房间\nlocal S,D,G,E,L,R,T,C,P,O,m,x='SafeGridIndex','Data','GetRoomByIdx','GetRooms',Game():GetLevel(),{}T=L[E](L)C,O=#T,function(r,i,d)i,d=r[S],r[D] and r[D].Doors for j=0,7 do if(not d or d&1==1)then L:MakeRedRoomDoor(i,j)L:UncoverHiddenDoor(i,j)end d=d and d>>1 end R[i]=true r.DisplayFlags=4 end O(L[G](L,L:GetCurrentRoomDesc()[S]))while P~=C do P=C for i=1,C do m=T:Get(i-1)x=m[S]m=L[G](L,x,N)if not R[x]then O(m)end end T=L[E](L)C=#T end L:UpdateVisibility()\n\n--2. 长按道具键/副手键1s以上=连续多次按键\nlocal A,M,H,B,K,G=Isaac.AddCallback,ModCallbacks,GetPtrHash,ButtonAction,{'ACTION_ITEM','ACTION_PILLCARD'},{M={}}A(G.M,M.MC_POST_PLAYER_RENDER,function(_,p)local k,n,a=H(p)G[k]=G[k]or{}n=G[k]for _,b in pairs(K)do a=B[b]if Input.IsActionPressed(a,p.ControllerIndex)then n[a]=n[a]or Isaac.GetTime()else n[a]=nil end end end)A(G.M,M.MC_INPUT_ACTION,function(_,e,_,a)e=e and e:ToPlayer()if e then local k,t,s=H(e),Isaac.GetTime()s=G[k]and G[k][a]if s and s<t then return t>1e3+s end end end,InputHook.IS_ACTION_TRIGGERED)A(G.M,M.MC_POST_ENTITY_REMOVE,function(_,e)G[H(e)]=nil end,EntityType.ENTITY_PLAYER)\n\n--3. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nIsaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--4. 强制给予玩家道具590(水星)、3x道具649(甜甜糖梅宝)。\nIsaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({590,{649,3}})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n\n--5. 从游戏中移除捐款机\nIsaac.AddCallback({},18,function()Game():SetStateFlag(17,true)end)\n\n--6. 从游戏中移除饰品85(业报)。\nlocal G,F,b=32768,Isaac.AddCallback,{85}F({},31,function(_,p)for _,i in pairs(b)do if p:HasTrinket(i)then p:TryRemoveTrinket(i)end end end)F({},37,function(_,f,v,s)if v==350 then repeat f=1 for _,i in pairs(b)do if i|G==s|G then f,s=0,s&G|Game():GetItemPool():GetTrinket()break end end until f>0 return{v,s}end end)\n\n--7. 每开启新游戏时，在初始房间根据玩家人数n，生成n组多选一道具(87-洛基的角,229-萌死戳的肺,233-小小星球)\nlocal V,g,N=Vector,{87,229,233}Isaac.AddCallback({},15,function(_,c)local n,x,y=Game():GetNumPlayers()if not c then x,y=(720-#g*80)/2,(640-n*80)/2 for i=1,n do for j=1,#g do Isaac.Spawn(5,100,g[j],V(x+80*(j-1),y),V.Zero,N):ToPickup().OptionsPickupIndex=i end y=y+80 end end end)\n\n--8.  从游戏中移除道具329(鲁多维科科技)和579(英灵剑)\nlocal I,C,Y,T,A=Isaac,{329,579},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n\n--9. [不适配手柄]禁止玩家暂停游戏、禁止使用控制台(忏悔+不生效)；可使用Esc返回游戏菜单\nlocal A,B,M,T,O,P=Isaac.AddCallback,ButtonAction,ModCallbacks,{},Options,'PauseOnFocusLost'A(T,M.MC_POST_RENDER,function()O[P]=false for i=1,Game():GetNumPlayers()do local c=Isaac.GetPlayer(i-1).ControllerIndex if Input.IsActionPressed(B.ACTION_MENUBACK,c)then Game():Fadeout(1,2)end end end)A(T,M.MC_INPUT_ACTION,function(_,_,h,b)if b==B.ACTION_CONSOLE or b==B.ACTION_PAUSE then return h==InputHook.GET_ACTION_VALUE and 0 or false end end)A(T,M.MC_PRE_MOD_UNLOAD,function()O[P]=true end)\n\n--10. 死亡证明内的道具、任务道具之外的所有道具均被替换为饰品掉落；角色受伤时自动吃掉携带的饰品\nlocal F,G=Isaac.AddCallback,Game()F({},11,function(_,e)e:ToPlayer():UseActiveItem(479,3339)SFXManager():Play(157)end,1)F({},37,function(_,_,v,s)if(v==100 and not Isaac.GetItemConfig():GetCollectible(s):HasTags(1<<15)and G:GetLevel():GetCurrentRoomDesc().Data.Name~='Death Certificate')then return{350,G:GetItemPool():GetTrinket()}end end)\n\n--11. 初始给予玩家道具116(9伏特)、9*311(犹大的影子)、356(车载电池)、468(阴影)、619(长子权)。\nlocal I,G=Isaac,Game()I.AddCallback({},15,function(p,c,t,n)if not c then for _,i in pairs({116,{311,9},356,468,619})do for k=1,G:GetNumPlayers()do p,t,n=I.GetPlayer(k-1),table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(t)do p:AddCollectible(t,I.GetItemConfig():GetCollectible(t).InitCharge)end end G:GetItemPool():RemoveCollectible(t)end end end)\n\n--12. 免疫失忆症、免疫迷途诅咒。\nlocal F=Isaac.AddCallback F({},10,function()Game():GetLevel():RemoveCurses(4)end,25)F({},12,function(_,c)return ~4&c end)\n\n--13. 强制给予玩家饰品140(所多玛之果)。\nIsaac.AddCallback({},31,function(a,p,b)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then b='Parent'a=p[b]p[b]=nil for _,i in pairs({140})do if not p:HasTrinket(i)then p:DropTrinket(p.Position+p.PositionOffset,true)p:AddTrinket(i)p:UseActiveItem(479,3339)end end p[b]=a end end)\n\n--14. 从游戏中移除符文41(黑符文)、卡牌74(月亮?)和魂石83(该隐的魂石)。\nlocal b,Y,N,F,G={41,74,83},true,false,Isaac.AddCallback,Game()F({},31,function(_,p)for _,i in pairs(b)do for s=0,3 do if p:GetCard(s)==i then p:SetCard(s,0)end end end end)F({},37,function(r,f,v,s)if v==300 then repeat f=Y for _,i in pairs(b)do if i==s then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetCardRNG(REPENTANCE_PLUS and -1 or 0)s=G:GetItemPool():GetCard(r:GetSeed(),Y,Y,N)r:Next()break end end until f return{v,s}end end)\n\n--15. 从游戏中移除药丸23(我能永远看清)。\nlocal b,Y,N,F,G,P,E,L,T={23},true,false,Isaac.AddCallback,Game(),'GetItemPool','GetPillEffect','GetPill',{}F(T,31,function(_,p,o)o=G[P](G)for _,i in pairs(b)do for s=0,3 do if o[E](o,p[L](p,s),p)==i then p:SetPill(s,0)end end end end)F(T,37,function(p,f,v,s,r)p=G[P](G)if v==70 then repeat f=Y for _,i in pairs(b)do if i==p[E](p,s)then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetPillRNG(REPENTANCE_PLUS and -1 or 0)s=p[L](p,r:GetSeed())r:Next()break end end until f return{v,s}end end)\n\n--16. 强制敌人变为精英怪(不包括6无敌变种和25彩虹变种，“0”和“1”可替换为非负整数表示权重)。\nlocal A,C={[0]=1,[1]=1,[2]=1,[3]=1,[4]=1,[5]=1,[6]=0,[7]=1,[8]=1,[9]=1,[10]=1,[11]=1,[12]=1,[13]=1,[14]=1,[15]=1,[16]=1,[17]=1,[18]=1,[19]=1,[20]=1,[21]=1,[22]=1,[23]=1,[24]=1,[25]=0},{}for k,v in pairs(A)do for _=1,v do C[#C+1]=k end end Isaac.AddCallback({}, ModCallbacks.MC_NPC_UPDATE, function(_,e)if e:IsVulnerableEnemy()and e:IsActiveEnemy(false)and not e:IsBoss()and not e:IsInvincible() and not e:IsChampion()then e:MakeChampion(e.InitSeed,C[e.InitSeed%#C+1])end end)\n\n--17. 黏币变为镍币\nIsaac.AddCallback({},ModCallbacks.MC_POST_PICKUP_INIT,function(_,p)if p.SubType==CoinSubType.COIN_STICKYNICKEL then p:Morph(p.Type,p.Variant,CoinSubType.COIN_NICKEL,true)end end,PickupVariant.PICKUP_COIN)\n\n--18. 角色吸引硬币\nIsaac.AddCallback({},ModCallbacks.MC_POST_PICKUP_UPDATE,function(_,p)local e,l=Game():GetNearestPlayer(p.Position+p.PositionOffset)l=e.Position+e.PositionOffset-p.Position-p.PositionOffset p.Velocity=3*(l:Length()>10 and math.log(l:Length())or 0)*l:Normalized()p.GridCollisionClass=EntityGridCollisionClass.GRIDCOLL_NONE end,PickupVariant.PICKUP_COIN)\n\n--19. 非任务道具替换为以下道具之一：道具36(大便)、道具74(25美分)、道具667(稻草人)\nlocal I,C=Isaac,{36,74,667}I.AddCallback({},ModCallbacks.MC_POST_PICKUP_INIT,function(_,p)local s=p.SubType if not I.GetItemConfig():GetCollectible(s):HasTags(ItemConfig.TAG_QUEST)then for _,v in pairs(C)do if v==s then return end end local r=RNG()r:SetSeed(p.InitSeed,35)p:Morph(p.Type,p.Variant,C[r:RandomInt(#C)+1],true,true)end end,PickupVariant.PICKUP_COLLECTIBLE)\n\n--20. 强制角色为游魂。\nIsaac.AddCallback({},ModCallbacks.MC_POST_PLAYER_UPDATE,function(_,p)local t=PlayerType.PLAYER_THELOST if t~=p:GetPlayerType()then p:ChangePlayerType(t)end end)\n\n--21. 用于储存数据，无实际效果（兼容发光沙漏，不兼容rewind）\n--_Data()返回的数据兼容发光沙漏,_Data(entity)=entity:GetData(),_rew()返回当前是否处于rew状态（不更新数据）,_Pata()返回的数据仅在游戏结束时重置;rewind会触发游戏结束和游戏开始。\nlocal I,M,N,H,T,F,D,A=Isaac,ModCallbacks,'MC_POST_NEW_ROOM',function(e)return e.InitSeed end,true,false D,A={B={},D={},T={},R=F,C=F,G=F,M={}},function(S,...)I.AddPriorityCallback(D.M,S,CallbackPriority.IMPORTANT,...)end local function C(s)if type(s)=='table'then local c={}for k,v in pairs(s)do c[k]=C(v)end return c end return s end A(M.MC_USE_ITEM,function()D.T=C(D.B)D.R,D.C=T,F end,CollectibleType.COLLECTIBLE_GLOWING_HOUR_GLASS)A(M[N],function()if not D.G then D.G=T return end if D.R then if D.C then D.R=F end D.C=not D.C end if not D.R then D.B=C(D.T)end end)A(M.MC_POST_GAME_STARTED,function(_,c)D.R,D.C=F,F if c then D.T=C(D.B)else D.T,D.B,D.D={},{},{}end I.RunCallback(M[N])end)A(M.MC_PRE_GAME_EXIT,function(_,d)if d then D.B=C(D.T)else D.D,D.B={},{}end D.R,D.C,D.G,D.T=F,F,F,{}end)A(M.MC_POST_ENTITY_REMOVE,function(_,e)D.T[H(e)]=nil end)function _Data(e)if e then local k=H(e)D.T[k]=D.T[k]or{}return D.T[k]end return D.T end function _rew()return D.R end function _Pata()return D.D end\n\n--22. 固定开启下列彩蛋种子：G_FUEL。\nlocal S={SeedEffect.SEED_G_FUEL}Isaac.AddCallback({},ModCallbacks.MC_POST_UPDATE,function()local D,f=Game():GetSeeds()for _,d in pairs(S)do if D:CanAddSeedEffect(d)then D:AddSeedEffect(d)f=true end end if f then Isaac.ExecuteCommand('restart')end end)\n\n--23. 角色的下列属性不会超出限定的值（nil表示不做限制）：移速(nil~2.00)；弹速(nil~3.00)\nlocal A,M,V,T,E=Isaac.AddCallback,ModCallbacks,{['MoveSpeed']={min=nil,max=2.00,F='SPEED'},['MaxFireDelay']={min=nil,max=nil,F='FIREDELAY'},['Damage']={min=nil,max=nil,F='DAMAGE'},['TearRange']={min=nil,max=nil,F='RANGE'},['ShotSpeed']={min=nil,max=3.00,F='SHOTSPEED'},['Luck']={min=nil,max=nil,F='LUCK'},['SpriteScale']={min=nil,max=nil,F='SIZE'}},{}E=function(p,k,v)local l,r=v.min,v.max if l and l>p[k]then p[k]=l end if r and r<p[k]then p[k]=r end end A(T,M.MC_EVALUATE_CACHE,function(_,p,f)for k,v in pairs(V)do if f==CacheFlag['CACHE_'..v.F]then return E(p,k,v)end end end)A(T,M.MC_POST_PEFFECT_UPDATE,function(_,p)for k,v in pairs(V)do E(p,k,v)end end)\n\n--24. 取消屏幕晃动\nIsaac.AddCallback({},ModCallbacks.MC_POST_UPDATE,function()Game():ShakeScreen(0)end)\n--."}, "1.御灵术.lua": {"raw": "--御灵术\n--禁用角色：Lilith, Lilith(Tainted)\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n--简要介绍\n--玩家蒙眼，身边会生成小精灵自动攻击敌人，可用鼠标左键指定小精灵的优先攻击位置。\n--小精灵兼容角色属性和泪弹特效，不兼容弹道数量和攻击方式。\n--击败敌人会释放灵魂，灵魂会给敌人施加负面增益，给玩家提供属性增益。\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nl Isaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--2. 玩家周围每秒生成{射速}只小精灵，小精灵存在时间为{0.37*射程^0.57}秒，飞行速度与{弹速}相关。小精灵会自动攻击房间内的敌人，并对敌人发射{玩家泪弹}，不兼容弹道数量和攻击方式。\n--可按住鼠标左键指定小精灵的优先攻击位置。\n--击败敌人时，敌人会释放1只灵魂；灵魂会四散逃逸然后飞向玩家，每收集一只灵魂都会为玩家提供{灵魂所属敌人最大生命值1%}的临时或永久属性增益，其中临时属性增益每帧（每秒60次）衰减{0.1%(最低0.001)}。\n--灵魂有4种颜色，32.8125%为红色，会对路径上的敌人造成2秒{灼烧}伤害（每秒造成等同于玩家攻击力的伤害），并给予玩家{临时攻击力增益}；32.8125%为绿色，会对路径上的敌人造成2秒{中毒}伤害（每秒造成敌人最大血量10%的伤害(头目为1%)，并给予玩家{临时射速增益}；32.8125%为蓝色，会对路径上的敌人造成3秒{冰冻}效果，并给予玩家{临时射程增益}；1.5625%为白色，会对路径上的敌人使用{圣光}攻击，并给予玩家{永久幸运增益}，圣光会对敌人造成最多6段伤害，每段伤害为{200%玩家的攻击力}。\n--场上最多存在100只小精灵，超过时玩家不再召唤小精灵，已存在的小精灵可以触发多次攻击。\n--场上最多存在20只灵魂，超过时新的灵魂将被储存入队。场上灵魂数量低于上限时，储存的灵魂将被释放。\n--小退和rewind会清除所有增益。\nl local Ve,Af,Hf,Ga,Is,Re,Di,Q,R,I,F,B,J,C,Z,O,Y,E,K,G,P,D,L,A,U,M,S,V,W,T,H,N,X='AddVelocity','AddEntityFlags','HasEntityFlags',Game(),'IsVulnerableEnemy','Remove','Distance',math,Random,Isaac,Isaac.AddCallback,Isaac.Spawn,Isaac.GetRoomEntities,Vector,Vector.Zero,Color,true,1e3,1<<37,Isaac.GetFrameCount,'Position','InitSeed','FromAngle','Parent','Variant','Color','MaxHitPoints',1<<29,{[1]={'Damage',function(l,a)return l+a end},[2]={'MaxFireDelay',function(l,a)return(30/(30/(l+1)+a))-1 end},[8]={'TearRange',function(l,a)return l+40*a end},[1024]={'Luck',function(l,a)return l+a end}},{},function(m)local a,b='Size','SizeMulti'return m and m[a]/2*(m[b].X+m[b].Y)or 0 end,{}X=function(e)local s=e[D]N[s]=N[s]or{}return N[s]end F(N,4,function(_,p)p:EvaluateItems()end)for f,t in pairs(W)do F(N,8,function(_,p)local d,s=X(p),t[1]p[s]=t[2](p[s],d[s]or 0)end,f)end F(N,15,function()N,T={},{}end)F(N,29,function(_,e)if e:IsEnemy()and not e:IsInvincible()then N.W=N.W or{}N.W[#N.W+1]=e end end)F(N,31,function(_,p)local d,t,w,s,c=X(p),.5/(1+p[W[2][1]])for f,r in pairs(W)do s=r[1]d[s]=Q.max(0,d[s]and(d[s]-(f~=1024 and Q.max(1e-3,d[s]*1e-3)or 0))or 0)p:AddCacheFlags(f)end d.A=d.A and d.A+t or t if d.A>=1 then d.A=d.A-1 if not N.C or N.C<100 then w=B(E,65,0,p[P]+80*C[L](R()),Z,p)c=w:GetSprite()[M]w[M]=O(c.R,c.G,c.B,2)w[Af](w,K)X(w).T=G()T[w[D]]=p N.C=N.C and N.C+1 or 1 else d.B=d.B and d.B+1 or 1 end end if(not N.I or N.I<20)and N.W and #N.W>0 then w=table.remove(N.W,1)d=B(E,179,1,w[P],90*C[L](R()),w)d.Target=p d[Af](d,K)X(d).H=w[S]/100 t=B(E,166,0,d[P],Z,d)t[A]=d t[Af](t,K)d.Child=t c=d[D]&63 if c<21 then d[M]=O(1,0,0,3)elseif c<42 then d[M]=O(0,1,0,3)elseif c<63 then d[M]=O(0,1,1,3)else d[M]=O(1,1,1,10)end t[M]=d[M]T[d[D]]=p T[t[D]]=p N.I=N.I and N.I+1 or 1 end end)F(N,55,function(_,e)local p,x,j,s,u,a,k,l,v,f,c,t=T[e[D]],Input.GetMousePosition(Y),1/0,e[P]if p then a=X(p)t=.37*(p[W[8][1]]/40)^.57 u=(G()-X(e).T)/60 c=e[M]e[M]=O(c.R,c.G,c.B,2*(1-u/t))if t<u then e[Re](e)return end f=function(m,z)local d,v,t=z or m[P]v=(d-s):Normalized()*p.ShotSpeed if d[Di](d,s)<=H(m)+H(e)then t=p:FireTear(s,10*v,Y,Y)t:AddTearFlags(1)t.Scale=.1 if a.B and a.B>0 then a.B=a.B-1 else e[Re](e)end else e[Ve](e,v)end end if Ga:GetRoom():IsMirrorWorld()then x.X=x.X-2*I.ScreenToWorldDistance(I.WorldToScreen(x)-I.WorldToRenderPosition(C(320,240))).X end if Input.IsMouseBtnPressed(0)then return f(nil,x)else for _,m in pairs(J())do if m[Is](m)and not m[Hf](m,V)then l=m[P][Di](m[P],s)-H(m)if l<j then j,k=l,m end end end end if l then return f(k)end v=(p[P]+80*C[L](R())-s):Normalized()e[Ve](e,.1*v+.2*C[L](R()))end end,65)F(N,55,function(_,e)local p,v,x,w,d,h=T[e[D]]if e[U]~=65 and p then for _,n in pairs(J())do if e[A]then e[P]=e[A].PositionOffset+e[A][P]elseif R()&7==0 then v=(n[P]-e[P]):Normalized()e[Ve](e,((e[D]&1)*2-1)*C(-v.Y,v.X))end if n[Is](n)and not n[Hf](n,V)and n[P][Di](n[P],e[P])<=H(n)+H(e)then x,w=(e[A]and e[A][D]or e[D])&63,EntityRef(p)if x<21 then n:AddBurn(w,60,p[W[1][1]]/30)elseif x<42 then if n:IsBoss()then d=3e3 else d=3e2 end n:AddPoison(w,60,e[S]/d)elseif x<63 then n:AddFreeze(w,90)else h=B(E,19,0,n[P],Z,p)h[A]=p h.CollisionDamage=2*p[W[1][1]]end end end end end)F(N,67,function(_,e)local h,x,p,d,f=X(e).H,e[D]&63,T[e[D]]if p then if e[U]==179 then d=X(p)N.I=N.I and N.I-1 or 0 if x<21 then f=W[1][1]elseif x<42 then f=W[2][1]elseif x<63 then f=W[8][1]else f=W[1024][1]end d[f]=d[f]and d[f]+h or h elseif e[U]==65 then N.C=N.C-1 end end T[e[D]]=nil end,E)F(N,67,function(_,e)N[e[D]]=nil end)\n\n--3. 游戏开始时根据玩家数生成道具653-“驱魔护符”。\nl Isaac.AddCallback({},15,function(_,c)if not c then for i=1,Game():GetNumPlayers()do Isaac.Spawn(5,100,653,Isaac.GetPlayer(i).Position,Vector.Zero,nil)end end end)\n\n--4. 打开鼠标控制功能并显示鼠标位置。\nl Options.MouseControl=true Isaac.AddCallback({},2,function(p)p=Isaac.WorldToScreen(Input.GetMousePosition(true))Isaac.RenderText('o',p.X-2.2,p.Y-6.4,0,1,1,1)end)\n--.", "cleaned": "--御灵术\n--禁用角色：Lilith, Lilith(Tainted)\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n--简要介绍\n--玩家蒙眼，身边会生成小精灵自动攻击敌人，可用鼠标左键指定小精灵的优先攻击位置。\n--小精灵兼容角色属性和泪弹特效，不兼容弹道数量和攻击方式。\n--击败敌人会释放灵魂，灵魂会给敌人施加负面增益，给玩家提供属性增益。\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nIsaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--2. 玩家周围每秒生成{射速}只小精灵，小精灵存在时间为{0.37*射程^0.57}秒，飞行速度与{弹速}相关。小精灵会自动攻击房间内的敌人，并对敌人发射{玩家泪弹}，不兼容弹道数量和攻击方式。\n--可按住鼠标左键指定小精灵的优先攻击位置。\n--击败敌人时，敌人会释放1只灵魂；灵魂会四散逃逸然后飞向玩家，每收集一只灵魂都会为玩家提供{灵魂所属敌人最大生命值1%}的临时或永久属性增益，其中临时属性增益每帧（每秒60次）衰减{0.1%(最低0.001)}。\n--灵魂有4种颜色，32.8125%为红色，会对路径上的敌人造成2秒{灼烧}伤害（每秒造成等同于玩家攻击力的伤害），并给予玩家{临时攻击力增益}；32.8125%为绿色，会对路径上的敌人造成2秒{中毒}伤害（每秒造成敌人最大血量10%的伤害(头目为1%)，并给予玩家{临时射速增益}；32.8125%为蓝色，会对路径上的敌人造成3秒{冰冻}效果，并给予玩家{临时射程增益}；1.5625%为白色，会对路径上的敌人使用{圣光}攻击，并给予玩家{永久幸运增益}，圣光会对敌人造成最多6段伤害，每段伤害为{200%玩家的攻击力}。\n--场上最多存在100只小精灵，超过时玩家不再召唤小精灵，已存在的小精灵可以触发多次攻击。\n--场上最多存在20只灵魂，超过时新的灵魂将被储存入队。场上灵魂数量低于上限时，储存的灵魂将被释放。\n--小退和rewind会清除所有增益。\nlocal Ve,Af,Hf,Ga,Is,Re,Di,Q,R,I,F,B,J,C,Z,O,Y,E,K,G,P,D,L,A,U,M,S,V,W,T,H,N,X='AddVelocity','AddEntityFlags','HasEntityFlags',Game(),'IsVulnerableEnemy','Remove','Distance',math,Random,Isaac,Isaac.AddCallback,Isaac.Spawn,Isaac.GetRoomEntities,Vector,Vector.Zero,Color,true,1e3,1<<37,Isaac.GetFrameCount,'Position','InitSeed','FromAngle','Parent','Variant','Color','MaxHitPoints',1<<29,{[1]={'Damage',function(l,a)return l+a end},[2]={'MaxFireDelay',function(l,a)return(30/(30/(l+1)+a))-1 end},[8]={'TearRange',function(l,a)return l+40*a end},[1024]={'Luck',function(l,a)return l+a end}},{},function(m)local a,b='Size','SizeMulti'return m and m[a]/2*(m[b].X+m[b].Y)or 0 end,{}X=function(e)local s=e[D]N[s]=N[s]or{}return N[s]end F(N,4,function(_,p)p:EvaluateItems()end)for f,t in pairs(W)do F(N,8,function(_,p)local d,s=X(p),t[1]p[s]=t[2](p[s],d[s]or 0)end,f)end F(N,15,function()N,T={},{}end)F(N,29,function(_,e)if e:IsEnemy()and not e:IsInvincible()then N.W=N.W or{}N.W[#N.W+1]=e end end)F(N,31,function(_,p)local d,t,w,s,c=X(p),.5/(1+p[W[2][1]])for f,r in pairs(W)do s=r[1]d[s]=Q.max(0,d[s]and(d[s]-(f~=1024 and Q.max(1e-3,d[s]*1e-3)or 0))or 0)p:AddCacheFlags(f)end d.A=d.A and d.A+t or t if d.A>=1 then d.A=d.A-1 if not N.C or N.C<100 then w=B(E,65,0,p[P]+80*C[L](R()),Z,p)c=w:GetSprite()[M]w[M]=O(c.R,c.G,c.B,2)w[Af](w,K)X(w).T=G()T[w[D]]=p N.C=N.C and N.C+1 or 1 else d.B=d.B and d.B+1 or 1 end end if(not N.I or N.I<20)and N.W and #N.W>0 then w=table.remove(N.W,1)d=B(E,179,1,w[P],90*C[L](R()),w)d.Target=p d[Af](d,K)X(d).H=w[S]/100 t=B(E,166,0,d[P],Z,d)t[A]=d t[Af](t,K)d.Child=t c=d[D]&63 if c<21 then d[M]=O(1,0,0,3)elseif c<42 then d[M]=O(0,1,0,3)elseif c<63 then d[M]=O(0,1,1,3)else d[M]=O(1,1,1,10)end t[M]=d[M]T[d[D]]=p T[t[D]]=p N.I=N.I and N.I+1 or 1 end end)F(N,55,function(_,e)local p,x,j,s,u,a,k,l,v,f,c,t=T[e[D]],Input.GetMousePosition(Y),1/0,e[P]if p then a=X(p)t=.37*(p[W[8][1]]/40)^.57 u=(G()-X(e).T)/60 c=e[M]e[M]=O(c.R,c.G,c.B,2*(1-u/t))if t<u then e[Re](e)return end f=function(m,z)local d,v,t=z or m[P]v=(d-s):Normalized()*p.ShotSpeed if d[Di](d,s)<=H(m)+H(e)then t=p:FireTear(s,10*v,Y,Y)t:AddTearFlags(1)t.Scale=.1 if a.B and a.B>0 then a.B=a.B-1 else e[Re](e)end else e[Ve](e,v)end end if Ga:GetRoom():IsMirrorWorld()then x.X=x.X-2*I.ScreenToWorldDistance(I.WorldToScreen(x)-I.WorldToRenderPosition(C(320,240))).X end if Input.IsMouseBtnPressed(0)then return f(nil,x)else for _,m in pairs(J())do if m[Is](m)and not m[Hf](m,V)then l=m[P][Di](m[P],s)-H(m)if l<j then j,k=l,m end end end end if l then return f(k)end v=(p[P]+80*C[L](R())-s):Normalized()e[Ve](e,.1*v+.2*C[L](R()))end end,65)F(N,55,function(_,e)local p,v,x,w,d,h=T[e[D]]if e[U]~=65 and p then for _,n in pairs(J())do if e[A]then e[P]=e[A].PositionOffset+e[A][P]elseif R()&7==0 then v=(n[P]-e[P]):Normalized()e[Ve](e,((e[D]&1)*2-1)*C(-v.Y,v.X))end if n[Is](n)and not n[Hf](n,V)and n[P][Di](n[P],e[P])<=H(n)+H(e)then x,w=(e[A]and e[A][D]or e[D])&63,EntityRef(p)if x<21 then n:AddBurn(w,60,p[W[1][1]]/30)elseif x<42 then if n:IsBoss()then d=3e3 else d=3e2 end n:AddPoison(w,60,e[S]/d)elseif x<63 then n:AddFreeze(w,90)else h=B(E,19,0,n[P],Z,p)h[A]=p h.CollisionDamage=2*p[W[1][1]]end end end end end)F(N,67,function(_,e)local h,x,p,d,f=X(e).H,e[D]&63,T[e[D]]if p then if e[U]==179 then d=X(p)N.I=N.I and N.I-1 or 0 if x<21 then f=W[1][1]elseif x<42 then f=W[2][1]elseif x<63 then f=W[8][1]else f=W[1024][1]end d[f]=d[f]and d[f]+h or h elseif e[U]==65 then N.C=N.C-1 end end T[e[D]]=nil end,E)F(N,67,function(_,e)N[e[D]]=nil end)\n\n--3. 游戏开始时根据玩家数生成道具653-“驱魔护符”。\nIsaac.AddCallback({},15,function(_,c)if not c then for i=1,Game():GetNumPlayers()do Isaac.Spawn(5,100,653,Isaac.GetPlayer(i).Position,Vector.Zero,nil)end end end)\n\n--4. 打开鼠标控制功能并显示鼠标位置。\nOptions.MouseControl=true Isaac.AddCallback({},2,function(p)p=Isaac.WorldToScreen(Input.GetMousePosition(true))Isaac.RenderText('o',p.X-2.2,p.Y-6.4,0,1,1,1)end)\n--."}, "2.糖梅联萌.lua": {"raw": "--糖梅联萌\n--禁用角色：Lilith, Lilith(Tainted)\n--除非重新加载了模组，否则不要重复输入代码！\n \n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nl Isaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n \n--2. 进入房间时，如果玩家没有糖梅溜溜笛（道具650），则获得一支，使用后可召唤强化糖梅宝宝跟班作战。每造成一定伤害时，随机玩家附近会生成一支糖梅溜溜笛。\nl local I,F,G,A,S,Y,C,K,P,W,U,T,E,M,X,D,N=Isaac,Isaac.AddCallback,GetPtrHash,0,0,true,Vector,350,224,649,650,{},Game(),Sprite(),'Position','State'M:Load('gfx/908.000_baby plum.anm2',Y)M:Play('Idle',Y)M.Color=Color(1,1,1,3)M.Scale=.3*C.One F(T,1,function()M:Update()end)F(T,6,function(_,f)if f[D]>=6 then f[D]=3 end end,P)F(T,11,function(_,e,a)if e:IsVulnerableEnemy()then A=A+a if A>=100+80*E:GetLevel():GetStage()then A=0 local t=I.Spawn(5,K,1,E:GetRandomPlayer(C.One,1)[X],3*C.FromAngle(Random()%360),N):ToPickup()T[G(t)]=1 t.Timeout=90 end end end)F(T,15,function(_,c)if not c then A=0 S=0 end end)F(T,19,function()S=S+1 end)F(T,31,function(_,p)if p:GetActiveItem(3)~=U and S>0 then p:SetPocketActiveItem(U,3,Y)S=S-1 end end)F(T,32,function(_,p,o)local V=I.WorldToRenderPosition(p[X])+o M:Render(V)E:GetFont():DrawStringScaled(S,V.X-4,V.Y-12,.5,.5,KColor.Cyan,8,Y)end)F(T,36,function(_,t)if T[G(t)]then local s=t:GetSprite()s:ReplaceSpritesheet(0,'gfx/items/collectibles/collectibles_650_plumflute.png')s:LoadGraphics()end end,K)F(T,38,function(_,t,p)p=p:ToPlayer()if p and T[G(t)]then t:Remove()p:AnimateCollectible(U)S=S+1 return Y end end,K)F(T,67,function(_,e)T[G(e)]=N end,5)\n\n--3. 强制给予玩家道具590(水星)、3x道具649(甜甜糖梅宝)。\nl Isaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({590,{649,3}})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n--.", "cleaned": "--糖梅联萌\n--禁用角色：Lilith, Lilith(Tainted)\n--除非重新加载了模组，否则不要重复输入代码！\n \n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nIsaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n \n--2. 进入房间时，如果玩家没有糖梅溜溜笛（道具650），则获得一支，使用后可召唤强化糖梅宝宝跟班作战。每造成一定伤害时，随机玩家附近会生成一支糖梅溜溜笛。\nlocal I,F,G,A,S,Y,C,K,P,W,U,T,E,M,X,D,N=Isaac,Isaac.AddCallback,GetPtrHash,0,0,true,Vector,350,224,649,650,{},Game(),Sprite(),'Position','State'M:Load('gfx/908.000_baby plum.anm2',Y)M:Play('Idle',Y)M.Color=Color(1,1,1,3)M.Scale=.3*C.One F(T,1,function()M:Update()end)F(T,6,function(_,f)if f[D]>=6 then f[D]=3 end end,P)F(T,11,function(_,e,a)if e:IsVulnerableEnemy()then A=A+a if A>=100+80*E:GetLevel():GetStage()then A=0 local t=I.Spawn(5,K,1,E:GetRandomPlayer(C.One,1)[X],3*C.FromAngle(Random()%360),N):ToPickup()T[G(t)]=1 t.Timeout=90 end end end)F(T,15,function(_,c)if not c then A=0 S=0 end end)F(T,19,function()S=S+1 end)F(T,31,function(_,p)if p:GetActiveItem(3)~=U and S>0 then p:SetPocketActiveItem(U,3,Y)S=S-1 end end)F(T,32,function(_,p,o)local V=I.WorldToRenderPosition(p[X])+o M:Render(V)E:GetFont():DrawStringScaled(S,V.X-4,V.Y-12,.5,.5,KColor.Cyan,8,Y)end)F(T,36,function(_,t)if T[G(t)]then local s=t:GetSprite()s:ReplaceSpritesheet(0,'gfx/items/collectibles/collectibles_650_plumflute.png')s:LoadGraphics()end end,K)F(T,38,function(_,t,p)p=p:ToPlayer()if p and T[G(t)]then t:Remove()p:AnimateCollectible(U)S=S+1 return Y end end,K)F(T,67,function(_,e)T[G(e)]=N end,5)\n\n--3. 强制给予玩家道具590(水星)、3x道具649(甜甜糖梅宝)。\nIsaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({590,{649,3}})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n--."}, "3.丢雷佬.lua": {"raw": "--丢雷佬\n--禁用角色：Lilith, Lilith(Tainted)\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nl Isaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--2. 玩家放置炸弹改为托举炸弹（被托举的炸弹与道具-胎儿博士-拥有相同的伤害与特效），同时不再消耗炸弹数量：\nl local I,Z,F,P=Isaac,Vector.Zero,Isaac.AddCallback,'Position'F({},2,function()for i=0,Game():GetNumPlayers()-1 do local p,d,b=I.GetPlayer(i)d=p.ControllerIndex if Input.IsActionTriggered(8,d)and not p:IsHoldingItem()then if p:GetNumGigaBombs()>0 then b=I.Spawn(4,17,0,p[P],Z,p):ToBomb()p:AddGigaBombs(-1)else b=p:FireBomb(p[P],Z)end b.Flags=p:GetBombFlags()p:TryHoldEntity(b)end end end)F({},13,function(_,e,_,a)if e and e:ToPlayer()and a==8 then return false end end,1)\n\n--3. 炸弹掉落物50%替换为超级炸弹，50%替换为大笑脸炸弹：\nl local I,F=Isaac,Isaac.AddCallback F({},24,function(_,t,v,s,_,_,_,d)if t==5 and v==40 then if d&1==0 then s=7 else t,v,s=4,4,0 end end return{t,v,s,d}end)F({},34,function(_,e)if e.SubType~=7 then I.Spawn(5,40,0,e.Position,e.Velocity,e.SpawnerEntity)e:Remove()end end,40)\n--.", "cleaned": "--丢雷佬\n--禁用角色：Lilith, Lilith(Tainted)\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nIsaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--2. 玩家放置炸弹改为托举炸弹（被托举的炸弹与道具-胎儿博士-拥有相同的伤害与特效），同时不再消耗炸弹数量：\nlocal I,Z,F,P=Isaac,Vector.Zero,Isaac.AddCallback,'Position'F({},2,function()for i=0,Game():GetNumPlayers()-1 do local p,d,b=I.GetPlayer(i)d=p.ControllerIndex if Input.IsActionTriggered(8,d)and not p:IsHoldingItem()then if p:GetNumGigaBombs()>0 then b=I.Spawn(4,17,0,p[P],Z,p):ToBomb()p:AddGigaBombs(-1)else b=p:FireBomb(p[P],Z)end b.Flags=p:GetBombFlags()p:TryHoldEntity(b)end end end)F({},13,function(_,e,_,a)if e and e:ToPlayer()and a==8 then return false end end,1)\n\n--3. 炸弹掉落物50%替换为超级炸弹，50%替换为大笑脸炸弹：\nlocal I,F=Isaac,Isaac.AddCallback F({},24,function(_,t,v,s,_,_,_,d)if t==5 and v==40 then if d&1==0 then s=7 else t,v,s=4,4,0 end end return{t,v,s,d}end)F({},34,function(_,e)if e.SubType~=7 then I.Spawn(5,40,0,e.Position,e.Velocity,e.SpawnerEntity)e:Remove()end end,40)\n--."}, "4.雷雨.lua": {"raw": "--雷雨\n--禁用角色：Lilith, Lilith(Tainted)\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nl Isaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--2. 每秒随机天降火箭,落地处生成可投掷的手雷。火箭数量为每个玩家的运气的绝对值+1的总和，每位玩家运气触发上限为30\nl local I,F,G,Z,M,N=Isaac,Isaac.AddCallback,GetPtrHash,Vector.Zero,{}F({},31,function(_,s)local t,r,p=math.abs(s.Luck)if(I.GetFrameCount()%60<=math.min(t,30))then p=I.GetRandomPosition()I.Spawn(1e3,30,0,p,Z,s):ToEffect().Timeout=30 r=I.Spawn(1e3,31,0,p,Z,s)r:ToEffect().Timeout=30 M[G(r)]=1 end end)F({},67,function(_,e)if(M[G(e)])then M[G(e)]=N I.Spawn(5,41,0,e.Position,Z,N):ToPickup().Timeout=90 end end,1e3)\n\n--3. 从游戏中移除捐款机\nl Isaac.AddCallback({},18,function()Game():SetStateFlag(17,true)end)\n--.", "cleaned": "--雷雨\n--禁用角色：Lilith, Lilith(Tainted)\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nIsaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--2. 每秒随机天降火箭,落地处生成可投掷的手雷。火箭数量为每个玩家的运气的绝对值+1的总和，每位玩家运气触发上限为30\nlocal I,F,G,Z,M,N=Isaac,Isaac.AddCallback,GetPtrHash,Vector.Zero,{}F({},31,function(_,s)local t,r,p=math.abs(s.Luck)if(I.GetFrameCount()%60<=math.min(t,30))then p=I.GetRandomPosition()I.Spawn(1e3,30,0,p,Z,s):ToEffect().Timeout=30 r=I.Spawn(1e3,31,0,p,Z,s)r:ToEffect().Timeout=30 M[G(r)]=1 end end)F({},67,function(_,e)if(M[G(e)])then M[G(e)]=N I.Spawn(5,41,0,e.Position,Z,N):ToPickup().Timeout=90 end end,1e3)\n\n--3. 从游戏中移除捐款机\nIsaac.AddCallback({},18,function()Game():SetStateFlag(17,true)end)\n--."}, "5.烂醉如泥.lua": {"raw": "--烂醉如泥（注意！很晕！！！）\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有实体贴图会旋转、变大或变小；游戏会不时变慢和变快（损坏的怀表效果）\nl local I,M,V,R,S=Isaac,math,Vector,'SpriteRotation','SpriteScale'I.AddCallback({},1,function()local t,r,a,b,d,g,s=I.GetTime()/1e3,Game():GetRoom()a,b=M.sin(t),M.cos(t)for _,e in pairs(I.GetRoomEntities())do if e.Type~=1 or e.Parent then d=e.InitSeed if d&1==0 then d=1 else d=-1 end e[R]=(e[R]+d)%360 e[S]=V(1.5*a,1+.5*b)e.SizeMulti=e[S]else e[R]=20*a end r:SetBrokenWatchState(t//1%3)end for i=0,r:GetGridSize()-1 do g=r:GetGridEntity(i)if g then s=g:GetSprite()d=i if d&1==0 then d=1 else d=-1 end s.Rotation=(s.Rotation+d)%360 s.Scale=V(1+.5*a,1.5*b)end end end)\n\n--2. 玩家眼泪获得追踪、幽灵和穿刺效果；每进入新楼层，都会在初始房间生成一个死亡证明\nl local A=Isaac.AddCallback A({},8,function(_,p)p.TearFlags=p.TearFlags|7 end,32)A({},18,function()Isaac.ExecuteCommand('spawn 5.100.628')end)\n--.", "cleaned": "--烂醉如泥（注意！很晕！！！）\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有实体贴图会旋转、变大或变小；游戏会不时变慢和变快（损坏的怀表效果）\nlocal I,M,V,R,S=Isaac,math,Vector,'SpriteRotation','SpriteScale'I.AddCallback({},1,function()local t,r,a,b,d,g,s=I.GetTime()/1e3,Game():GetRoom()a,b=M.sin(t),M.cos(t)for _,e in pairs(I.GetRoomEntities())do if e.Type~=1 or e.Parent then d=e.InitSeed if d&1==0 then d=1 else d=-1 end e[R]=(e[R]+d)%360 e[S]=V(1.5*a,1+.5*b)e.SizeMulti=e[S]else e[R]=20*a end r:SetBrokenWatchState(t//1%3)end for i=0,r:GetGridSize()-1 do g=r:GetGridEntity(i)if g then s=g:GetSprite()d=i if d&1==0 then d=1 else d=-1 end s.Rotation=(s.Rotation+d)%360 s.Scale=V(1+.5*a,1.5*b)end end end)\n\n--2. 玩家眼泪获得追踪、幽灵和穿刺效果；每进入新楼层，都会在初始房间生成一个死亡证明\nlocal A=Isaac.AddCallback A({},8,function(_,p)p.TearFlags=p.TearFlags|7 end,32)A({},18,function()Isaac.ExecuteCommand('spawn 5.100.628')end)\n--."}, "6.洒洒水啦~.lua": {"raw": "--洒洒水啦~\n--禁用角色：Lilith, Lilith(Tainted)\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重新输入代码！\n \n---- 代码效果(不用管中文，全选复制即可) ----\n \n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nl Isaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--2. 每开启新游戏时，在初始房间根据玩家人数n，生成n组多选一道具(87-洛基的角,229-萌死戳的肺,233-小小星球)\nl local V,g,N=Vector,{87,229,233}Isaac.AddCallback({},15,function(_,c)local n,x,y=Game():GetNumPlayers()if not c then x,y=(720-#g*80)/2,(640-n*80)/2 for i=1,n do for j=1,#g do Isaac.Spawn(5,100,g[j],V(x+80*(j-1),y),V.Zero,N):ToPickup().OptionsPickupIndex=i end y=y+80 end end end)\n\n--3. 从游戏中移除道具329(鲁多维科科技)和579(英灵剑)\nl local I,C,Y,T,A=Isaac,{329,579},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n\n--4. 所有玩家攻击方式变更为自动攻击\nl local F,T,S,D=Isaac.AddCallback,{},'InitSeed'D=function(e)local k=e[S]T[k]=T[k]or{}return T[k]end F(T,8,function(d,p)d=D(p)if d.s then d.s:Remove()d.s=nil end end,1<<8)F(T,31,function(d,p)d=D(p)if d.s and d.s:Exists()then d.s.TargetPosition=p.Position d.s.Visible=false else if d.s then d.s:Remove()end d.s=Isaac.Spawn(3,120,1,p.Position,Vector.Zero,p)d.s:AddEntityFlags(1<<37)end end)F(T,67,function(_,e)T[e[S]]=nil end)\n--.", "cleaned": "--洒洒水啦~\n--禁用角色：Lilith, Lilith(Tainted)\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重新输入代码！\n \n---- 代码效果(不用管中文，全选复制即可) ----\n \n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nIsaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--2. 每开启新游戏时，在初始房间根据玩家人数n，生成n组多选一道具(87-洛基的角,229-萌死戳的肺,233-小小星球)\nlocal V,g,N=Vector,{87,229,233}Isaac.AddCallback({},15,function(_,c)local n,x,y=Game():GetNumPlayers()if not c then x,y=(720-#g*80)/2,(640-n*80)/2 for i=1,n do for j=1,#g do Isaac.Spawn(5,100,g[j],V(x+80*(j-1),y),V.Zero,N):ToPickup().OptionsPickupIndex=i end y=y+80 end end end)\n\n--3. 从游戏中移除道具329(鲁多维科科技)和579(英灵剑)\nlocal I,C,Y,T,A=Isaac,{329,579},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n\n--4. 所有玩家攻击方式变更为自动攻击\nlocal F,T,S,D=Isaac.AddCallback,{},'InitSeed'D=function(e)local k=e[S]T[k]=T[k]or{}return T[k]end F(T,8,function(d,p)d=D(p)if d.s then d.s:Remove()d.s=nil end end,1<<8)F(T,31,function(d,p)d=D(p)if d.s and d.s:Exists()then d.s.TargetPosition=p.Position d.s.Visible=false else if d.s then d.s:Remove()end d.s=Isaac.Spawn(3,120,1,p.Position,Vector.Zero,p)d.s:AddEntityFlags(1<<37)end end)F(T,67,function(_,e)T[e[S]]=nil end)\n--."}, "7.天降酸雨.lua": {"raw": "--天降酸雨\n--角色限定：初始攻击方式为眼泪\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 强制锁定所有玩家射程为100（受谷底石、天秤影响）；锁定弹速为0（无法更改）\nl local f=Isaac.AddCallback f(_,4,function(_,p)p.ShotSpeed=0 end)f(_,8,function(_,p)p.TearRange=4e3 end,8)\n\n--2. 强制给予玩家道具149-吐根酊,315-怪异磁铁,330-豆奶,540-扁石。\nl Isaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({149,315,330,540})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n--.", "cleaned": "--天降酸雨\n--角色限定：初始攻击方式为眼泪\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 强制锁定所有玩家射程为100（受谷底石、天秤影响）；锁定弹速为0（无法更改）\nlocal f=Isaac.AddCallback f(_,4,function(_,p)p.ShotSpeed=0 end)f(_,8,function(_,p)p.TearRange=4e3 end,8)\n\n--2. 强制给予玩家道具149-吐根酊,315-怪异磁铁,330-豆奶,540-扁石。\nIsaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({149,315,330,540})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n--."}, "8.世界是最强的替身.lua": {"raw": "--世界是最强的替身\n--输入下面的代码后，开始一局新游戏\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 当游戏暂停时，玩家可以正常行动。\nl I,Y,U,P,T=Isaac,true,'Update','ToPlayer'T={['Trapdoor']=Y,['MinecartEnter']=Y,['FallIn']=Y,['LeapUp']=Y,['SuperLeapUp']=Y,['LeapDown']=Y,['SuperLeapDown']=Y}I.AddCallback({},ModCallbacks.MC_POST_RENDER,function()if Game():IsPaused()then for _,e in pairs(I.GetRoomEntities())do local p,r,l,k=e[P](e),e.Parent,e:ToLaser(),e:ToKnife()if p and not T[p:GetSprite():GetAnimation()]then p[U](p)elseif r and r[P](r)then if l then l.DisableFollowParent=Y elseif k and not k:IsFlying()then k[U](k)end end end end end)\n--.", "cleaned": "--世界是最强的替身\n--输入下面的代码后，开始一局新游戏\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 当游戏暂停时，玩家可以正常行动。\nI,Y,U,P,T=Isaac,true,'Update','ToPlayer'T={['Trapdoor']=Y,['MinecartEnter']=Y,['FallIn']=Y,['LeapUp']=Y,['SuperLeapUp']=Y,['LeapDown']=Y,['SuperLeapDown']=Y}I.AddCallback({},ModCallbacks.MC_POST_RENDER,function()if Game():IsPaused()then for _,e in pairs(I.GetRoomEntities())do local p,r,l,k=e[P](e),e.Parent,e:ToLaser(),e:ToKnife()if p and not T[p:GetSprite():GetAnimation()]then p[U](p)elseif r and r[P](r)then if l then l.DisableFollowParent=Y elseif k and not k:IsFlying()then k[U](k)end end end end end)\n--."}, "9.绯红之王.lua": {"raw": "--绯红之王\n--除非重新加载了模组，否则不要重复输入代码\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 每10秒会删除角色1.5秒的时间\nl local s,a,e,n=0,1 Isaac.AddCallback({},1,function()e=Isaac.GetTime()if a and e-s>1e4 then s=e a=n for _=1,45 do Game():Update()end a=1 end end)\n--.", "cleaned": "--绯红之王\n--除非重新加载了模组，否则不要重复输入代码\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 每10秒会删除角色1.5秒的时间\nlocal s,a,e,n=0,1 Isaac.AddCallback({},1,function()e=Isaac.GetTime()if a and e-s>1e4 then s=e a=n for _=1,45 do Game():Update()end a=1 end end)\n--."}, "10.天堂制造.lua": {"raw": "--天堂制造\n--禁用Goodtrip\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码!\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 游戏会缓慢加速\nl local a,s,I,u,i,f,Z,b,t,T,A,N=0,1,Isaac,0,0,0,{}T,A=I.GetFrameCount,I.AddCallback t=T()A(Z,1,function()u=T()if(u-t>59)then t=u s=s+.001 end if(b)then return end b=1 i=s//1 f=s-i a=a+f if(a>=1)then i=i+1 a=a-1 end for _=1,i-1 do Game():Update()end b=N end)A(Z,2,function()I.RenderText(string.format('%.3f',s),I.GetScreenWidth()/2,10,0,1,1,1)end)A(Z,15,function(_,c)if(not c)then s=1 end end)\n\n\n--2. [不适配手柄]禁止玩家暂停游戏、禁止使用控制台(忏悔+不生效)；可使用Esc返回游戏菜单\nl local A,B,M,T,O,P=Isaac.AddCallback,ButtonAction,ModCallbacks,{},Options,'PauseOnFocusLost'A(T,M.MC_POST_RENDER,function()O[P]=false for i=1,Game():GetNumPlayers()do local c=Isaac.GetPlayer(i-1).ControllerIndex if Input.IsActionPressed(B.ACTION_MENUBACK,c)then Game():Fadeout(1,2)end end end)A(T,M.MC_INPUT_ACTION,function(_,_,h,b)if b==B.ACTION_CONSOLE or b==B.ACTION_PAUSE then return h==InputHook.GET_ACTION_VALUE and 0 or false end end)A(T,M.MC_PRE_MOD_UNLOAD,function()O[P]=true end)\n--.", "cleaned": "--天堂制造\n--禁用Goodtrip\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码!\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 游戏会缓慢加速\nlocal a,s,I,u,i,f,Z,b,t,T,A,N=0,1,Isaac,0,0,0,{}T,A=I.GetFrameCount,I.AddCallback t=T()A(Z,1,function()u=T()if(u-t>59)then t=u s=s+.001 end if(b)then return end b=1 i=s//1 f=s-i a=a+f if(a>=1)then i=i+1 a=a-1 end for _=1,i-1 do Game():Update()end b=N end)A(Z,2,function()I.RenderText(string.format('%.3f',s),I.GetScreenWidth()/2,10,0,1,1,1)end)A(Z,15,function(_,c)if(not c)then s=1 end end)\n\n\n--2. [不适配手柄]禁止玩家暂停游戏、禁止使用控制台(忏悔+不生效)；可使用Esc返回游戏菜单\nlocal A,B,M,T,O,P=Isaac.AddCallback,ButtonAction,ModCallbacks,{},Options,'PauseOnFocusLost'A(T,M.MC_POST_RENDER,function()O[P]=false for i=1,Game():GetNumPlayers()do local c=Isaac.GetPlayer(i-1).ControllerIndex if Input.IsActionPressed(B.ACTION_MENUBACK,c)then Game():Fadeout(1,2)end end end)A(T,M.MC_INPUT_ACTION,function(_,_,h,b)if b==B.ACTION_CONSOLE or b==B.ACTION_PAUSE then return h==InputHook.GET_ACTION_VALUE and 0 or false end end)A(T,M.MC_PRE_MOD_UNLOAD,function()O[P]=true end)\n--."}, "11.异食游戏.lua": {"raw": "--异食游戏\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n--注意：使用创世记仅最多生成一组3选1饰品。\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 死亡证明内的道具、任务道具之外的所有道具均被替换为饰品掉落；角色受伤时自动吃掉携带的饰品\nl local F,G=Isaac.AddCallback,Game()F({},11,function(_,e)e:ToPlayer():UseActiveItem(479,3339)SFXManager():Play(157)end,1)F({},37,function(_,_,v,s)if(v==100 and not Isaac.GetItemConfig():GetCollectible(s):HasTags(1<<15)and G:GetLevel():GetCurrentRoomDesc().Data.Name~='Death Certificate')then return{350,G:GetItemPool():GetTrinket()}end end)\n\n--2. 初始给予玩家道具139-妈妈的钱包，249-额外选择，414-更多选择，439-妈妈的盒子，670-选择?\nl local I,G=Isaac,Game()I.AddCallback({},15,function(p,c,t,n)if not c then for _,i in pairs({139,249,414,439,670})do for k=1,G:GetNumPlayers()do p,t,n=I.GetPlayer(k-1),table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(t)do p:AddCollectible(t,I.GetItemConfig():GetCollectible(t).InitCharge)end end G:GetItemPool():RemoveCollectible(t)end end end)\n--.", "cleaned": "--异食游戏\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n--注意：使用创世记仅最多生成一组3选1饰品。\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 死亡证明内的道具、任务道具之外的所有道具均被替换为饰品掉落；角色受伤时自动吃掉携带的饰品\nlocal F,G=Isaac.AddCallback,Game()F({},11,function(_,e)e:ToPlayer():UseActiveItem(479,3339)SFXManager():Play(157)end,1)F({},37,function(_,_,v,s)if(v==100 and not Isaac.GetItemConfig():GetCollectible(s):HasTags(1<<15)and G:GetLevel():GetCurrentRoomDesc().Data.Name~='Death Certificate')then return{350,G:GetItemPool():GetTrinket()}end end)\n\n--2. 初始给予玩家道具139-妈妈的钱包，249-额外选择，414-更多选择，439-妈妈的盒子，670-选择?\nlocal I,G=Isaac,Game()I.AddCallback({},15,function(p,c,t,n)if not c then for _,i in pairs({139,249,414,439,670})do for k=1,G:GetNumPlayers()do p,t,n=I.GetPlayer(k-1),table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(t)do p:AddCollectible(t,I.GetItemConfig():GetCollectible(t).InitCharge)end end G:GetItemPool():RemoveCollectible(t)end end end)\n--."}, "12.永远迷失.lua": {"raw": "--永远迷失（原-天眼地图）\n--禁用Goodtrip\n--禁止贪婪模式、禁止回溯路线\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 进入新房间时，自动开启地图全部房间和红房间，并移除所有房间的红色标签。\nl Isaac.AddCallback({},19,function()local l,r,s,t,f,g,x,e,o,n,a,m=Game():GetLevel(),{},'SafeGridIndex','Data','Flags','GetRooms','GetRoomByIdx'l:SetCanSeeEverything(true)e,o=function(c,k,d)c[f],d,k=~(1<<10)&c[f],c[t]and c[t].Doors,c[s]if k<0 then return end for j=0,7 do if not d or d&1>0 then l:MakeRedRoomDoor(k,j)l:UncoverHiddenDoor(k,j)end d=d and d>>1 end r[k]=1 end,l[g](l)n=#o e(l[x](l,l:GetCurrentRoomDesc()[s]))while a~=n do a=n for j=1,n do m=l[x](l,o:Get(j-1)[s])if not r[m[s]]then e(m)end end o=l[g](l)n=#o end end)\n\n--2. 每进入新的一层，传送角色至随机房间。\nl local I,G,S,L,D,A,R,F=Isaac,Game(),'StartRoomTransition','GetLevel','Data'A,R=I.AddCallback,function()return G[L](G):GetRandomRoomIndex(false,I.GetTime())end A({},1,function(l)l=G[L](G)if l:GetCurrentRoomIndex()==l:GetStartingRoomIndex()and l:GetCurrentRoom():IsFirstVisit()then G[S](G,R(),-1)F=1 end end)A({},19,function(l,s,r)l=G[L](G)if F==2 then s=l:GetRooms()for i=1,#s do r=l:GetRoomByIdx(s:Get(i-1).SafeGridIndex)if r[D]and r[D].Type~=5 then r.DisplayFlags=0 end end l:UpdateVisibility()F=0 elseif F==1 then G[S](G,R(),-1)F=2 end end)\n\n--3. 每进入一次错误房，生成一只黑暗以扫追杀玩家(这部分指令兼容发光沙漏，不兼容rewind指令)。\nl local function C(s,c)if type(s)=='table'then c={}for k,v in pairs(s)do c[k]=C(v)end return c end return s end local J,K,G,I,N,D,E,Y,H,Z,A,B,T,L,R,S,X=true,false,Game(),Isaac,'InitSeed',{},'GetEffects','Entity','HasNullEffect',{}A,D.T=I.AddCallback,{}T=function(e,k)D.T=D.T or{}k=e[N]D.T[k]=D.T[k]or{}return D.T[k]end A(Z,3,function()D=C(B)R,S=J,K end,422)A(Z,11,function(_,p,d,e,s,c)p=p:ToPlayer()d,e=T(p),p[E](p)if not d.s and s[Y]and Z.B and Z.B[s[Y][N]]and not e[H](e,112)then d.s=1 SFXManager():Play(43)p:SetMinDamageCooldown(c)return false end end,1)A(Z,15,function(_,c)R,S=K,K if c then D=C(B)else D,B,Z.B={},{},{}end I.RunCallback(19)end)A(Z,17,function(_,s)if s then B=C(D)else D,B={},{}end R,S,X,D=K,K,K,{}end)A(Z,18,function(p,e,d)for i=1,G:GetNumPlayers()do p=I.GetPlayer(i-1)e,d=p[E](p),T(p)if d.s then d.s=L e:RemoveNullEffect(112,e:GetNullEffectNum(112))end end for k,z in pairs(Z.B)do z:Remove()Z.B[k]=L end end)A(Z,19,function(c,e)if not X then X=J return end c,D.A,Z.B=1,D.A or 0,Z.B or{}if R then if S then R=K end S=not S end if not R then B=C(D)if G:GetLevel():GetCurrentRoomIndex()==-2 then D.A=D.A+1 end end for k,v in pairs(Z.B)do if not v:Exists()or c>D.A then v:Remove()Z.B[k]=L else c=c+1 end end for _=c,D.A do e=I.Spawn(866,0,0,I.GetRandomPosition(),Vector.Zero,L)Z.B[e[N]]=e end end)A(Z,30,function(_,n,c)c=c:ToPlayer()if c and Z.B and Z.B[n[N]]then c:TakeDamage(1,0,EntityRef(n),60)end end,866)A(Z,31,function(_,p,e)if T(p).s then e=p[E](p)if not e[H](e,112)then e:AddNullEffect(112)end if not p:HasCollectible(313,true)then e:RemoveCollectibleEffect(313,e:GetCollectibleEffectNum(313))end end end)A(Z,67,function(_,e)if not e:ToPlayer()and D.T then D.T[e[N]]=L end end)\n\n--4. 强制给予玩家道具91(探窟帽)、道具588(太阳)和道具589(月亮)。\nl Isaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({91,588,589})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n\n--5. 免疫失忆症、免疫迷途诅咒。\nl local F=Isaac.AddCallback F({},10,function()Game():GetLevel():RemoveCurses(4)end,25)F({},12,function(_,c)return ~4&c end)\n\n--6. 从游戏中移除道具21(指南针)、道具54(藏宝图)、道具76(X光透视)、道具158(水晶球)、道具246(蓝地图)、道具287(秘密之书)、道具333(思想)和道具580(红钥匙)。\nl local I,C,Y,T,A=Isaac,{21,54,76,158,246,287,333,580},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n\n--7. 从游戏中移除饰品170(水晶钥匙)。\nl local G,F,b=32768,Isaac.AddCallback,{170}F({},31,function(_,p)for _,i in pairs(b)do if p:HasTrinket(i)then p:TryRemoveTrinket(i)end end end)F({},37,function(_,f,v,s)if v==350 then repeat f=1 for _,i in pairs(b)do if i|G==s|G then f,s=0,s&G|Game():GetItemPool():GetTrinket()break end end until f>0 return{v,s}end end)\n\n--8. 从游戏中移除卡牌1(愚者)、卡牌5(皇帝)、卡牌10(隐者)、卡牌18(星星)、卡牌19(月亮)、卡牌20(太阳)、卡牌22(世界)、符文36(诸神)、卡牌74(月亮?)和卡牌78(红钥匙碎片)。\nl local b,Y,N,F,G={1,5,10,18,19,20,22,36,74,78},true,false,Isaac.AddCallback,Game()F({},31,function(_,p)for _,i in pairs(b)do for s=0,3 do if p:GetCard(s)==i then p:SetCard(s,0)end end end end)F({},37,function(r,f,v,s)if v==300 then repeat f=Y for _,i in pairs(b)do if i==s then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetCardRNG(REPENTANCE_PLUS and -1 or 0)s=G:GetItemPool():GetCard(r:GetSeed(),Y,Y,N)r:Next()break end end until f return{v,s}end end)\n--.", "cleaned": "--永远迷失（原-天眼地图）\n--禁用Goodtrip\n--禁止贪婪模式、禁止回溯路线\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 进入新房间时，自动开启地图全部房间和红房间，并移除所有房间的红色标签。\nIsaac.AddCallback({},19,function()local l,r,s,t,f,g,x,e,o,n,a,m=Game():GetLevel(),{},'SafeGridIndex','Data','Flags','GetRooms','GetRoomByIdx'l:SetCanSeeEverything(true)e,o=function(c,k,d)c[f],d,k=~(1<<10)&c[f],c[t]and c[t].Doors,c[s]if k<0 then return end for j=0,7 do if not d or d&1>0 then l:MakeRedRoomDoor(k,j)l:UncoverHiddenDoor(k,j)end d=d and d>>1 end r[k]=1 end,l[g](l)n=#o e(l[x](l,l:GetCurrentRoomDesc()[s]))while a~=n do a=n for j=1,n do m=l[x](l,o:Get(j-1)[s])if not r[m[s]]then e(m)end end o=l[g](l)n=#o end end)\n\n--2. 每进入新的一层，传送角色至随机房间。\nlocal I,G,S,L,D,A,R,F=Isaac,Game(),'StartRoomTransition','GetLevel','Data'A,R=I.AddCallback,function()return G[L](G):GetRandomRoomIndex(false,I.GetTime())end A({},1,function(l)l=G[L](G)if l:GetCurrentRoomIndex()==l:GetStartingRoomIndex()and l:GetCurrentRoom():IsFirstVisit()then G[S](G,R(),-1)F=1 end end)A({},19,function(l,s,r)l=G[L](G)if F==2 then s=l:GetRooms()for i=1,#s do r=l:GetRoomByIdx(s:Get(i-1).SafeGridIndex)if r[D]and r[D].Type~=5 then r.DisplayFlags=0 end end l:UpdateVisibility()F=0 elseif F==1 then G[S](G,R(),-1)F=2 end end)\n\n--3. 每进入一次错误房，生成一只黑暗以扫追杀玩家(这部分指令兼容发光沙漏，不兼容rewind指令)。\nlocal function C(s,c)if type(s)=='table'then c={}for k,v in pairs(s)do c[k]=C(v)end return c end return s end local J,K,G,I,N,D,E,Y,H,Z,A,B,T,L,R,S,X=true,false,Game(),Isaac,'InitSeed',{},'GetEffects','Entity','HasNullEffect',{}A,D.T=I.AddCallback,{}T=function(e,k)D.T=D.T or{}k=e[N]D.T[k]=D.T[k]or{}return D.T[k]end A(Z,3,function()D=C(B)R,S=J,K end,422)A(Z,11,function(_,p,d,e,s,c)p=p:ToPlayer()d,e=T(p),p[E](p)if not d.s and s[Y]and Z.B and Z.B[s[Y][N]]and not e[H](e,112)then d.s=1 SFXManager():Play(43)p:SetMinDamageCooldown(c)return false end end,1)A(Z,15,function(_,c)R,S=K,K if c then D=C(B)else D,B,Z.B={},{},{}end I.RunCallback(19)end)A(Z,17,function(_,s)if s then B=C(D)else D,B={},{}end R,S,X,D=K,K,K,{}end)A(Z,18,function(p,e,d)for i=1,G:GetNumPlayers()do p=I.GetPlayer(i-1)e,d=p[E](p),T(p)if d.s then d.s=L e:RemoveNullEffect(112,e:GetNullEffectNum(112))end end for k,z in pairs(Z.B)do z:Remove()Z.B[k]=L end end)A(Z,19,function(c,e)if not X then X=J return end c,D.A,Z.B=1,D.A or 0,Z.B or{}if R then if S then R=K end S=not S end if not R then B=C(D)if G:GetLevel():GetCurrentRoomIndex()==-2 then D.A=D.A+1 end end for k,v in pairs(Z.B)do if not v:Exists()or c>D.A then v:Remove()Z.B[k]=L else c=c+1 end end for _=c,D.A do e=I.Spawn(866,0,0,I.GetRandomPosition(),Vector.Zero,L)Z.B[e[N]]=e end end)A(Z,30,function(_,n,c)c=c:ToPlayer()if c and Z.B and Z.B[n[N]]then c:TakeDamage(1,0,EntityRef(n),60)end end,866)A(Z,31,function(_,p,e)if T(p).s then e=p[E](p)if not e[H](e,112)then e:AddNullEffect(112)end if not p:HasCollectible(313,true)then e:RemoveCollectibleEffect(313,e:GetCollectibleEffectNum(313))end end end)A(Z,67,function(_,e)if not e:ToPlayer()and D.T then D.T[e[N]]=L end end)\n\n--4. 强制给予玩家道具91(探窟帽)、道具588(太阳)和道具589(月亮)。\nIsaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({91,588,589})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n\n--5. 免疫失忆症、免疫迷途诅咒。\nlocal F=Isaac.AddCallback F({},10,function()Game():GetLevel():RemoveCurses(4)end,25)F({},12,function(_,c)return ~4&c end)\n\n--6. 从游戏中移除道具21(指南针)、道具54(藏宝图)、道具76(X光透视)、道具158(水晶球)、道具246(蓝地图)、道具287(秘密之书)、道具333(思想)和道具580(红钥匙)。\nlocal I,C,Y,T,A=Isaac,{21,54,76,158,246,287,333,580},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n\n--7. 从游戏中移除饰品170(水晶钥匙)。\nlocal G,F,b=32768,Isaac.AddCallback,{170}F({},31,function(_,p)for _,i in pairs(b)do if p:HasTrinket(i)then p:TryRemoveTrinket(i)end end end)F({},37,function(_,f,v,s)if v==350 then repeat f=1 for _,i in pairs(b)do if i|G==s|G then f,s=0,s&G|Game():GetItemPool():GetTrinket()break end end until f>0 return{v,s}end end)\n\n--8. 从游戏中移除卡牌1(愚者)、卡牌5(皇帝)、卡牌10(隐者)、卡牌18(星星)、卡牌19(月亮)、卡牌20(太阳)、卡牌22(世界)、符文36(诸神)、卡牌74(月亮?)和卡牌78(红钥匙碎片)。\nlocal b,Y,N,F,G={1,5,10,18,19,20,22,36,74,78},true,false,Isaac.AddCallback,Game()F({},31,function(_,p)for _,i in pairs(b)do for s=0,3 do if p:GetCard(s)==i then p:SetCard(s,0)end end end end)F({},37,function(r,f,v,s)if v==300 then repeat f=Y for _,i in pairs(b)do if i==s then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetCardRNG(REPENTANCE_PLUS and -1 or 0)s=G:GetItemPool():GetCard(r:GetSeed(),Y,Y,N)r:Next()break end end until f return{v,s}end end)\n--."}, "13.饕餮.lua": {"raw": "--饕餮\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 玩家拾取非任务道具时，自动触发道具477-虚空效果；玩家拾取饰品时，自动触发道具479-熔炉效果。\nl Isaac.AddCallback({},31,function(i,p,u,f)i,f,u=p.QueuedItem.Item,3339,'UseActiveItem'if 0~=p:GetTrinket(0)then p[u](p,479,f)end if(not p:IsItemQueueEmpty())then if(i:IsCollectible()and not i:HasTags(1<<15))then p[u](p,477,f)elseif(i:IsTrinket())then p[u](p,479,f)end end end)\n\n--2. 掉落物受玩家吸引。\nl local P,O='Position','PositionOffset'Isaac.AddCallback({},35,function(v,e,p)p=Game():GetNearestPlayer(e[P]+e[O])v=p[P]+p[O]-e[P]-e[O]e.GridCollisionClass=0 e:AddVelocity(10<v:Length()and v:Normalized()or Vector.Zero)end)\n\n--3. 玩家会自动使用副手的卡牌、符文、药丸等消耗品\nl Isaac.AddCallback({},31,function(_,p,t,u)for i=0,1 do t,u=p:GetPill(i),p:GetCard(i)if t~=0 then p:UsePill(Game():GetItemPool():GetPillEffect(t,p),t)p:SetPill(i,0)elseif u~=0 then p:UseCard(u)p:SetCard(i,0)end end end)\n\n--4. 强制给予玩家饰品140(所多玛之果)。\nl Isaac.AddCallback({},31,function(a,p,b)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then b='Parent'a=p[b]p[b]=nil for _,i in pairs({140})do if not p:HasTrinket(i)then p:DropTrinket(p.Position+p.PositionOffset,true)p:AddTrinket(i)p:UseActiveItem(479,3339)end end p[b]=a end end)\n--.", "cleaned": "--饕餮\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 玩家拾取非任务道具时，自动触发道具477-虚空效果；玩家拾取饰品时，自动触发道具479-熔炉效果。\nIsaac.AddCallback({},31,function(i,p,u,f)i,f,u=p.QueuedItem.Item,3339,'UseActiveItem'if 0~=p:GetTrinket(0)then p[u](p,479,f)end if(not p:IsItemQueueEmpty())then if(i:IsCollectible()and not i:HasTags(1<<15))then p[u](p,477,f)elseif(i:IsTrinket())then p[u](p,479,f)end end end)\n\n--2. 掉落物受玩家吸引。\nlocal P,O='Position','PositionOffset'Isaac.AddCallback({},35,function(v,e,p)p=Game():GetNearestPlayer(e[P]+e[O])v=p[P]+p[O]-e[P]-e[O]e.GridCollisionClass=0 e:AddVelocity(10<v:Length()and v:Normalized()or Vector.Zero)end)\n\n--3. 玩家会自动使用副手的卡牌、符文、药丸等消耗品\nIsaac.AddCallback({},31,function(_,p,t,u)for i=0,1 do t,u=p:GetPill(i),p:GetCard(i)if t~=0 then p:UsePill(Game():GetItemPool():GetPillEffect(t,p),t)p:SetPill(i,0)elseif u~=0 then p:UseCard(u)p:SetCard(i,0)end end end)\n\n--4. 强制给予玩家饰品140(所多玛之果)。\nIsaac.AddCallback({},31,function(a,p,b)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then b='Parent'a=p[b]p[b]=nil for _,i in pairs({140})do if not p:HasTrinket(i)then p:DropTrinket(p.Position+p.PositionOffset,true)p:AddTrinket(i)p:UseActiveItem(479,3339)end end p[b]=a end end)\n--."}, "14.突击考试.lua": {"raw": "--突击考试\n--禁止贪婪模式、禁止回溯路线\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 从游戏中移除道具252(小药袋)、道具477(虚空)、道具523(搬家盒)、道具580(红钥匙)、道具675(碎裂的宝珠)和道具706(无底坑)。\n-- 特判：不阻止触发红钥匙效果\nl local I,C,Y,T,A=Isaac,{252,477,523,580,675,706},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v and c~=580 then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n\n--2. 从游戏中移除符文41(黑符文)、卡牌74(月亮?)和魂石83(该隐的魂石)。\nl local b,Y,N,F,G={41,74,83},true,false,Isaac.AddCallback,Game()F({},31,function(_,p)for _,i in pairs(b)do for s=0,3 do if p:GetCard(s)==i then p:SetCard(s,0)end end end end)F({},37,function(r,f,v,s)if v==300 then repeat f=Y for _,i in pairs(b)do if i==s then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetCardRNG(REPENTANCE_PLUS and -1 or 0)s=G:GetItemPool():GetCard(r:GetSeed(),Y,Y,N)r:Next()break end end until f return{v,s}end end)\n\n--3.从游戏中移除饰品170(水晶钥匙)。\nl local G,F,b=32768,Isaac.AddCallback,{170}F({},31,function(_,p)for _,i in pairs(b)do if p:HasTrinket(i)then p:TryRemoveTrinket(i)end end end)F({},37,function(_,f,v,s)if v==350 then repeat f=1 for _,i in pairs(b)do if i|G==s|G then f,s=0,s&G|Game():GetItemPool():GetTrinket()break end end until f>0 return{v,s}end end)\n\n--4. 每新进入一层，根据红隐难度生成红钥匙碎片（单连4片、双连3片、三连2片、四连或以上1片）\n--屏幕上方显示与红隐相连的非红房间数；若当前层不存在红隐则相连数显示为0、不生成红钥匙碎片。\n--空拍红钥匙碎片，会替换为触发道具175-“爸爸的钥匙”。\n--若当前层存在红隐，玩家找到红隐之前无法拾取非任务道具和硬币。\nl local B,C,M,I,G,P,V,D,L,R,A,T,S,X,O,J,K,W,Q,Z,N,H,F,U,E=Color,0,math.abs,Isaac,Game(),'SubType','Variant','DisplayFlags','GetLevel','GetRooms','Data','Type','SafeGridIndex','GetRoomByIdx','Color','GetCard','SetCard','GetPill','SetPill',{}H,N,F,U,E=function(x,y)return M(x%13-y%13)+M(x//13-y//13)end,I.GetTime,I.AddCallback,function(s,r,l)l=G[L](G)s=l[R](l)for i=1,#s do r=s:Get(i-1)if r[A][T]==29 then return r end end end,function(p)return p[V]==20 or p[V]==100 and p[P]~=0 and not I.GetItemConfig():GetCollectible(p[P]):HasTags(1<<15)end F(Z,2,function(u,l,d,s,r)u=U()_Y=not u or u[D]>0 if not _Y and u then l,d=G[L](G),u[S]s=l[R](l)for i=1,#s do r=s:Get(i-1)if H(r[S],d)==1 and r[D]>0 then _Y=1 break end end end I.RenderText(C,I.GetScreenWidth()/2-4,10,not _Y and 1 or 0,_Y and 1 or 0,0,1)for i=1,G:GetNumPlayers()do u=I.GetPlayer(i-1)l=u:GetData()l._=l._ or{T=0}l=l._ if Input.IsActionPressed(10,u.ControllerIndex)and 78==u[J](u,0)and l.T+500<N()and not u:IsHoldingItem()and u:CanPickupItem()then l.T=N()s=u[W](u,1)if s~=0 then u[Q](u,0,s)u[Q](u,1,0)else u[K](u,0,u[J](u,1))u[K](u,1,0)end u:UseActiveItem(175)return end end end)F(Z,18,function(l,d,r)C=0 if U()then l,d=G[L](G),U()[S]for i=0,168 do r=l[X](l,i)if r[A]and r.Flags&1024==0 and H(i,d)==2 then C=C+1 end end for _=1,C<5 and 5-C or 1 do I.Spawn(5,300,78,G:GetRoom():GetCenterPos(),Vector.Zero,nil)end end end)F(Z,34,function(_,p)if not _Y and E(p)then p[O]=B(1,0,0,1)end end)F(Z,36,function(_,p)if _Y then p[O]=B(1,1,1,1)end end)F(Z,38,function(_,p,c)if not _Y and c:ToPlayer()and E(p)then return true end end)\n\n--5. 免疫失忆症、免疫迷途诅咒。\nl local F=Isaac.AddCallback F({},10,function()Game():GetLevel():RemoveCurses(4)end,25)F({},12,function(_,c)return ~4&c end)\n\n--6. 按住TAB键时，角色会吸引非红色硬币\n-- 依赖代码4\nl local A,M,T=Isaac.AddCallback,ModCallbacks,{}A(T,M.MC_POST_RENDER,function()T.C=Input.IsButtonPressed(Keyboard.KEY_TAB,0)end)A(T,M.MC_POST_PICKUP_UPDATE,function(_,p)if _Y and T.C then local e,l=Game():GetNearestPlayer(p.Position+p.PositionOffset)l=e.Position+e.PositionOffset-p.Position-p.PositionOffset p.Velocity=3*(l:Length()>10 and math.log(l:Length())or 0)*l:Normalized()p.GridCollisionClass=EntityGridCollisionClass.GRIDCOLL_NONE end end,PickupVariant.PICKUP_COIN)\n--.", "cleaned": "--突击考试\n--禁止贪婪模式、禁止回溯路线\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 从游戏中移除道具252(小药袋)、道具477(虚空)、道具523(搬家盒)、道具580(红钥匙)、道具675(碎裂的宝珠)和道具706(无底坑)。\n-- 特判：不阻止触发红钥匙效果\nlocal I,C,Y,T,A=Isaac,{252,477,523,580,675,706},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v and c~=580 then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n\n--2. 从游戏中移除符文41(黑符文)、卡牌74(月亮?)和魂石83(该隐的魂石)。\nlocal b,Y,N,F,G={41,74,83},true,false,Isaac.AddCallback,Game()F({},31,function(_,p)for _,i in pairs(b)do for s=0,3 do if p:GetCard(s)==i then p:SetCard(s,0)end end end end)F({},37,function(r,f,v,s)if v==300 then repeat f=Y for _,i in pairs(b)do if i==s then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetCardRNG(REPENTANCE_PLUS and -1 or 0)s=G:GetItemPool():GetCard(r:GetSeed(),Y,Y,N)r:Next()break end end until f return{v,s}end end)\n\n--3.从游戏中移除饰品170(水晶钥匙)。\nlocal G,F,b=32768,Isaac.AddCallback,{170}F({},31,function(_,p)for _,i in pairs(b)do if p:HasTrinket(i)then p:TryRemoveTrinket(i)end end end)F({},37,function(_,f,v,s)if v==350 then repeat f=1 for _,i in pairs(b)do if i|G==s|G then f,s=0,s&G|Game():GetItemPool():GetTrinket()break end end until f>0 return{v,s}end end)\n\n--4. 每新进入一层，根据红隐难度生成红钥匙碎片（单连4片、双连3片、三连2片、四连或以上1片）\n--屏幕上方显示与红隐相连的非红房间数；若当前层不存在红隐则相连数显示为0、不生成红钥匙碎片。\n--空拍红钥匙碎片，会替换为触发道具175-“爸爸的钥匙”。\n--若当前层存在红隐，玩家找到红隐之前无法拾取非任务道具和硬币。\nlocal B,C,M,I,G,P,V,D,L,R,A,T,S,X,O,J,K,W,Q,Z,N,H,F,U,E=Color,0,math.abs,Isaac,Game(),'SubType','Variant','DisplayFlags','GetLevel','GetRooms','Data','Type','SafeGridIndex','GetRoomByIdx','Color','GetCard','SetCard','GetPill','SetPill',{}H,N,F,U,E=function(x,y)return M(x%13-y%13)+M(x//13-y//13)end,I.GetTime,I.AddCallback,function(s,r,l)l=G[L](G)s=l[R](l)for i=1,#s do r=s:Get(i-1)if r[A][T]==29 then return r end end end,function(p)return p[V]==20 or p[V]==100 and p[P]~=0 and not I.GetItemConfig():GetCollectible(p[P]):HasTags(1<<15)end F(Z,2,function(u,l,d,s,r)u=U()_Y=not u or u[D]>0 if not _Y and u then l,d=G[L](G),u[S]s=l[R](l)for i=1,#s do r=s:Get(i-1)if H(r[S],d)==1 and r[D]>0 then _Y=1 break end end end I.RenderText(C,I.GetScreenWidth()/2-4,10,not _Y and 1 or 0,_Y and 1 or 0,0,1)for i=1,G:GetNumPlayers()do u=I.GetPlayer(i-1)l=u:GetData()l._=l._ or{T=0}l=l._ if Input.IsActionPressed(10,u.ControllerIndex)and 78==u[J](u,0)and l.T+500<N()and not u:IsHoldingItem()and u:CanPickupItem()then l.T=N()s=u[W](u,1)if s~=0 then u[Q](u,0,s)u[Q](u,1,0)else u[K](u,0,u[J](u,1))u[K](u,1,0)end u:UseActiveItem(175)return end end end)F(Z,18,function(l,d,r)C=0 if U()then l,d=G[L](G),U()[S]for i=0,168 do r=l[X](l,i)if r[A]and r.Flags&1024==0 and H(i,d)==2 then C=C+1 end end for _=1,C<5 and 5-C or 1 do I.Spawn(5,300,78,G:GetRoom():GetCenterPos(),Vector.Zero,nil)end end end)F(Z,34,function(_,p)if not _Y and E(p)then p[O]=B(1,0,0,1)end end)F(Z,36,function(_,p)if _Y then p[O]=B(1,1,1,1)end end)F(Z,38,function(_,p,c)if not _Y and c:ToPlayer()and E(p)then return true end end)\n\n--5. 免疫失忆症、免疫迷途诅咒。\nlocal F=Isaac.AddCallback F({},10,function()Game():GetLevel():RemoveCurses(4)end,25)F({},12,function(_,c)return ~4&c end)\n\n--6. 按住TAB键时，角色会吸引非红色硬币\n-- 依赖代码4\nlocal A,M,T=Isaac.AddCallback,ModCallbacks,{}A(T,M.MC_POST_RENDER,function()T.C=Input.IsButtonPressed(Keyboard.KEY_TAB,0)end)A(T,M.MC_POST_PICKUP_UPDATE,function(_,p)if _Y and T.C then local e,l=Game():GetNearestPlayer(p.Position+p.PositionOffset)l=e.Position+e.PositionOffset-p.Position-p.PositionOffset p.Velocity=3*(l:Length()>10 and math.log(l:Length())or 0)*l:Normalized()p.GridCollisionClass=EntityGridCollisionClass.GRIDCOLL_NONE end end,PickupVariant.PICKUP_COIN)\n--."}, "15.勇往直前.lua": {"raw": "--勇往直前\n--禁用Goodtrip\n--禁回溯路线\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n-- 简要介绍：\n-- 1. 地图大小变更为13x13，每个房间仅能进入一次；无法通过发光沙漏回到上一层；\n-- 2. 非终点楼层会有天堂光柱追逐玩家；终点层有R键追逐玩家。每被R键追到一次，追逐者的数量+1；\n-- 3. 房间未清理时，靠近绿色雅各会删除当前房间的清理奖励。\n-- 4. (仅适用键盘玩家)禁用暂停键，Esc键会直接小退。\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n-- 1. 用于储存数据，无实际效果（兼容发光沙漏，不兼容rewind）\nl local I,M,N,H,T,F,D,A=Isaac,ModCallbacks,'MC_POST_NEW_ROOM',function(e)return e.InitSeed end,true,false D,A={B={},D={},T={},R=F,C=F,G=F,M={}},function(S,...)I.AddPriorityCallback(D.M,S,CallbackPriority.IMPORTANT,...)end local function C(s)if type(s)=='table'then local c={}for k,v in pairs(s)do c[k]=C(v)end return c end return s end A(M.MC_USE_ITEM,function()D.T=C(D.B)D.R,D.C=T,F end,CollectibleType.COLLECTIBLE_GLOWING_HOUR_GLASS)A(M[N],function()if not D.G then D.G=T return end if D.R then if D.C then D.R=F end D.C=not D.C end if not D.R then D.B=C(D.T)end end)A(M.MC_POST_GAME_STARTED,function(_,c)D.R,D.C=F,F if c then D.T=C(D.B)else D.T,D.B,D.D={},{},{}end I.RunCallback(M[N])end)A(M.MC_PRE_GAME_EXIT,function(_,d)if d then D.B=C(D.T)else D.D,D.B={},{}end D.R,D.C,D.G,D.T=F,F,F,{}end)A(M.MC_POST_ENTITY_REMOVE,function(_,e)D.T[H(e)]=nil end)function _Data(e)if e then local k=H(e)D.T[k]=D.T[k]or{}return D.T[k]end return D.T end function _rew()return D.R end function _Pata()return D.D end\n-- _Data()返回的数据兼容发光沙漏,_Data(entity)=entity:GetData(),_rew()返回当前是否处于rew状态（不更新数据）,_Pata()返回的数据仅在游戏结束时重置;rewind会触发游戏结束和游戏开始。\n\n-- 2. 用于获取门的编号，无实际效果\nl local S={{0,1,2,28},{0,nil,2,nil},{nil,1,nil,28},{0,1,2,55,27,nil,29,nil},{nil,1,nil,55},{0,1,4,28,nil,3,nil,30},{0,nil,4,nil},{0,1,4,55,27,3,31,57},{2,28,4,55,27,3,31,57},{0,1,2,55,27,30,31,57},{0,1,4,28,29,3,31,57},{0,1,4,55,27,3,29,30}}function GetDoorId(i,s,r,d)if not d or d<0 then d=0 end return 2*(i%13)+27*(i//13)+S[s][r+1]+d*1e3 end function GetDim()local level=Game():GetLevel()local idx=level:GetCurrentRoomIndex()for d=0,2 do if GetPtrHash(level:GetRoomByIdx(idx,d))==GetPtrHash(level:GetRoomByIdx(idx,-1))then return d end end end\n\n-- 3. 进入新房间时，自动开启地图全部房间和红房间，并移除所有房间的红色标签。\nl local A,M,T=Isaac.AddCallback,ModCallbacks,{}A(T,M.MC_POST_NEW_ROOM,function()local l,r,s,t,f,g,x,v,e,o,n,a,m=Game():GetLevel(),{},'SafeGridIndex','Data','Flags','GetRooms','GetRoomByIdx','VisitedCount'l:SetCanSeeEverything(true)e,o=function(c,k,d)c[f],d,k=c[v]>0 and c[f]|(1<<10)or ~(1<<10)&c[f],c[t]and c[t].Doors,c[s]if k<0 then return end for j=0,7 do if not d or d&1>0 then l:MakeRedRoomDoor(k,j)l:UncoverHiddenDoor(k,j)end d=d and d>>1 end r[k]=1 end,l[g](l)n=#o e(l[x](l,l:GetCurrentRoomDesc()[s]))while a~=n do a=n for j=1,n do m=l[x](l,o:Get(j-1)[s])if not r[m[s]]then e(m)end end o=l[g](l)n=#o end end)\n\n-- 4.每个房间仅允许进入一次（兼容发光沙漏，不兼容rewind）\n-- 依赖代码1\n-- 依赖代码2\nl local A,M,T,D=Isaac.AddCallback,ModCallbacks,{},_Data()A(T,M.MC_POST_GAME_STARTED,function(_,c)if not c then D=_Data()D.LastDim,D.Locked,D.Now=-1,{},{}end end)A(T,M.MC_POST_NEW_LEVEL,function()D=_Data()D.LastDim,D.Locked,D.Now=-1,{},{}end)A(T,M.MC_POST_NEW_ROOM,function()D=_Data()for k,v in pairs({['LastDim']=-1,['Locked']={},['Now']={}})do D[k]=D[k]or v end local Dim=GetDim()local level=Game():GetLevel()local desc=level:GetCurrentRoomDesc()local idx=desc.SafeGridIndex local room=Game():GetRoom()if not _rew()then if Dim==D.LastDim and idx>=0 then for k,_ in pairs(D.Now)do D.Locked[k]=true end end D.Now={}end if(idx~=level:GetStartingRoomIndex()or not room:IsFirstVisit())and idx>=0 then local doors=desc.Data and desc.Data.Doors for i=0,7 do if not doors or doors&1>0 then if desc.Data and D.Locked[GetDoorId(idx,desc.Data.Shape,i,Dim)]then room:RemoveDoor(i)end end doors=doors and doors>>1 end end if not _rew()and idx>=0 then for i=0,7 do if room:GetDoor(i)then D.Now[GetDoorId(idx,desc.Data and desc.Data.Shape,i,Dim)]=true end end end D.LastDim=Dim end)\n\n--5. 免疫失忆症、免疫???、辨认传送药、免疫迷途诅咒、免疫混乱诅咒。\nl local A,M,C,P,T=Isaac.AddCallback,ModCallbacks,LevelCurse,PillEffect,{}A(T,M.MC_USE_PILL,function()Game():GetLevel():RemoveCurses(C.CURSE_OF_THE_LOST)end,P.PILLEFFECT_AMNESIA)A(T,M.MC_USE_PILL,function()Game():GetLevel():RemoveCurses(C.CURSE_OF_MAZE)end,P.PILLEFFECT_QUESTIONMARK)A(T,M.MC_POST_CURSE_EVAL,function(_,c)return ~(C.CURSE_OF_THE_LOST|C.CURSE_OF_MAZE)&c end)A(T,M.MC_GET_PILL_EFFECT,function(_,pillEffect,pillColor)if pillEffect==P.PILLEFFECT_TELEPILLS then Game():GetItemPool():IdentifyPill(pillColor)end end)\n\n--6. 从游戏中移除道具76(X光透视)和道具580(红钥匙)。\nl local I,C,Y,T,A=Isaac,{76,580},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n\n--7. 从游戏中移除饰品170(水晶钥匙)。\nl local G,F,b=32768,Isaac.AddCallback,{170}F({},31,function(_,p)for _,i in pairs(b)do if p:HasTrinket(i)then p:TryRemoveTrinket(i)end end end)F({},37,function(_,f,v,s)if v==350 then repeat f=1 for _,i in pairs(b)do if i|G==s|G then f,s=0,s&G|Game():GetItemPool():GetTrinket()break end end until f>0 return{v,s}end end)\n\n--8. 从游戏中移除卡牌78(红钥匙碎片)。\nl local b,Y,N,F,G={78},true,false,Isaac.AddCallback,Game()F({},31,function(_,p)for _,i in pairs(b)do for s=0,3 do if p:GetCard(s)==i then p:SetCard(s,0)end end end end)F({},37,function(r,f,v,s)if v==300 then repeat f=Y for _,i in pairs(b)do if i==s then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetCardRNG(REPENTANCE_PLUS and -1 or 0)s=G:GetItemPool():GetCard(r:GetSeed(),Y,Y,N)r:Next()break end end until f return{v,s}end end)\n\n--9. 从游戏中移除药丸23(我能永远看清)。\nl local b,Y,N,F,G,P,E,L,T={23},true,false,Isaac.AddCallback,Game(),'GetItemPool','GetPillEffect','GetPill',{}F(T,31,function(_,p,o)o=G[P](G)for _,i in pairs(b)do for s=0,3 do if o[E](o,p[L](p,s),p)==i then p:SetPill(s,0)end end end end)F(T,37,function(p,f,v,s,r)p=G[P](G)if v==70 then repeat f=Y for _,i in pairs(b)do if i==p[E](p,s)then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetPillRNG(REPENTANCE_PLUS and -1 or 0)s=p[L](p,r:GetSeed())r:Next()break end end until f return{v,s}end end)\n\n--10. 强制给予玩家道具91(探窟帽)、道具327(全家福)和道具328(底片)。\nl Isaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({91,327,328})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n\n--11. 生成迷你绿色堕化雅各吸引玩家，非终点层时，其身边会生成天堂光柱；终点层时，绿色堕化雅各变为R键。\n-- 在头目房内雅各不会生成光柱。\n-- 每被迫使用一次R键，会多一只绿色堕化雅各追逐玩家。\n-- 无法通过发光沙漏回到上一层。\n-- （兼容发光沙漏，不兼容rewind）\n-- 依赖代码1\nl local Y,N,A,M,T,E,V,Z,R,L,D,S,H=true,false,Isaac.AddCallback,ModCallbacks,{},EntityType.ENTITY_DARK_ESAU,Vector.One,Vector.Zero,Sprite()L,D,H=function()local s=Game():GetLevel():GetAbsoluteStage()if s>10 or s==0 then return Y end end,function(d)if d.SpawnerEntity then return N end local s,G=d.InitSeed,_Data()local chaser=G.Chasers and G.Chasers[s]if chaser then if chaser:Exists()then return Y end G.Chasers[s]=nil end if d.Type==E then d:Remove()end return N end,function(a,b)return a.Position+a.PositionOffset-(b and(b.Position-b.PositionOffset)or Z)end R:Load('gfx/005.100_Collectible.anm2',Y)R:ReplaceSpritesheet(1,Isaac.GetItemConfig():GetCollectible(CollectibleType.COLLECTIBLE_R_KEY).GfxFileName)R:LoadGraphics()R:SetFrame('Idle',1)A(T,M.MC_PRE_USE_ITEM,function(_,_,_,p)local G=Game()local level,room=G:GetLevel(),G:GetRoom()local index=level:GetStartingRoomIndex()if index==level:GetCurrentRoomIndex()and room:IsFirstVisit()then p:AnimateSad()return Y end end,CollectibleType.COLLECTIBLE_GLOWING_HOUR_GLASS)A(T,M.MC_POST_NEW_ROOM,function()for _,e in pairs(Isaac.FindByType(E,0,1))do D(e)end S=N local count,G=0,_Data()G.Chasers=G.Chasers or{}G.Count=G.Count or 1 for _,e in pairs(G.Chasers)do if D(e)then count=count+1 end end for _=count+1,G.Count do local chaser=Isaac.Spawn(E,0,1,Game():GetRoom():GetCenterPos(),Z,nil)G.Chasers[chaser.InitSeed]=chaser end if L()then return end for _,chaser in pairs(G.Chasers)do local heavenDoor=Isaac.Spawn(EntityType.ENTITY_EFFECT,EffectVariant.HEAVEN_LIGHT_DOOR,0,H(chaser),Z,chaser):ToEffect()heavenDoor.Parent=chaser end end)A(T,M.MC_POST_NEW_LEVEL,function()local G=_Data()G.Chasers=G.Chasers or{}for _,e in pairs(G.Chasers)do e:Remove()end end)A(T,M.MC_PRE_NPC_COLLISION,function(_,e,c)c=c:ToPlayer()if D(e)then if c then local r=Game():GetRoom()if L()then local G=_Data()G.Count=G.Count+1 c:UseActiveItem(CollectibleType.COLLECTIBLE_R_KEY)elseif not r:IsClear()and r:GetType()~=RoomType.ROOM_BOSS then S=Y r:TriggerClear()c:AnimateSad()end end return Y end end,E)A(T,M.MC_NPC_UPDATE,function(_,e)if D(e)then e.EntityCollisionClass=EntityCollisionClass.ENTCOLL_PLAYERONLY e:AddVelocity(.1*Vector.FromAngle(Random())+.3*H(Game():GetRandomPlayer(Z,0),e):Normalized())for i=1,Game():GetNumPlayers()do local p=Isaac.GetPlayer(i-1)if not p.Parent then e.Target=p break end end for k,v in pairs(_Data().Chasers)do if e.InitSeed~=k then local d=H(e,v)e:AddVelocity(d:Length()<40 and d:Normalized()or Z)end end end end,E)A(T,M.MC_POST_NPC_RENDER,function(_,e,o)if D(e)then if L()then e.Visible=N e.SizeMulti=V R:Render(Isaac.WorldToRenderPosition(H(e))+o+Vector(0,10))else e.Color=Color(0,1,0,1)e.Visible=Y end end end,E)A(T,M.MC_POST_EFFECT_UPDATE,function(_,e)if e.SubType==1 then return end local p=e.Parent if p then for i=1,Game():GetNumPlayers()do local r=Isaac.GetPlayer(i-1)local d=H(e,r)if not r.Parent and d:Length()<50 then r:AddVelocity(d:Normalized())end end p.SpriteScale=.5*V p.SizeMulti=2.5*V e.Position=H(p)e:FollowParent(p)else e:Remove()end end,EffectVariant.HEAVEN_LIGHT_DOOR)A(T,M.MC_PRE_SPAWN_CLEAN_AWARD,function()return S end)\n\n--12. [不适配手柄]禁止玩家暂停游戏、禁止使用控制台(忏悔+不生效)；可使用Esc返回游戏菜单\nl local A,B,M,T,O,P=Isaac.AddCallback,ButtonAction,ModCallbacks,{},Options,'PauseOnFocusLost'A(T,M.MC_POST_RENDER,function()O[P]=false for i=1,Game():GetNumPlayers()do local c=Isaac.GetPlayer(i-1).ControllerIndex if Input.IsActionPressed(B.ACTION_MENUBACK,c)then Game():Fadeout(1,2)end end end)A(T,M.MC_INPUT_ACTION,function(_,_,h,b)if b==B.ACTION_CONSOLE or b==B.ACTION_PAUSE then return h==InputHook.GET_ACTION_VALUE and 0 or false end end)A(T,M.MC_PRE_MOD_UNLOAD,function()O[P]=true end)\n--.", "cleaned": "--勇往直前\n--禁用Goodtrip\n--禁回溯路线\n--输入下面的代码后，开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n-- 简要介绍：\n-- 1. 地图大小变更为13x13，每个房间仅能进入一次；无法通过发光沙漏回到上一层；\n-- 2. 非终点楼层会有天堂光柱追逐玩家；终点层有R键追逐玩家。每被R键追到一次，追逐者的数量+1；\n-- 3. 房间未清理时，靠近绿色雅各会删除当前房间的清理奖励。\n-- 4. (仅适用键盘玩家)禁用暂停键，Esc键会直接小退。\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n-- 1. 用于储存数据，无实际效果（兼容发光沙漏，不兼容rewind）\nlocal I,M,N,H,T,F,D,A=Isaac,ModCallbacks,'MC_POST_NEW_ROOM',function(e)return e.InitSeed end,true,false D,A={B={},D={},T={},R=F,C=F,G=F,M={}},function(S,...)I.AddPriorityCallback(D.M,S,CallbackPriority.IMPORTANT,...)end local function C(s)if type(s)=='table'then local c={}for k,v in pairs(s)do c[k]=C(v)end return c end return s end A(M.MC_USE_ITEM,function()D.T=C(D.B)D.R,D.C=T,F end,CollectibleType.COLLECTIBLE_GLOWING_HOUR_GLASS)A(M[N],function()if not D.G then D.G=T return end if D.R then if D.C then D.R=F end D.C=not D.C end if not D.R then D.B=C(D.T)end end)A(M.MC_POST_GAME_STARTED,function(_,c)D.R,D.C=F,F if c then D.T=C(D.B)else D.T,D.B,D.D={},{},{}end I.RunCallback(M[N])end)A(M.MC_PRE_GAME_EXIT,function(_,d)if d then D.B=C(D.T)else D.D,D.B={},{}end D.R,D.C,D.G,D.T=F,F,F,{}end)A(M.MC_POST_ENTITY_REMOVE,function(_,e)D.T[H(e)]=nil end)function _Data(e)if e then local k=H(e)D.T[k]=D.T[k]or{}return D.T[k]end return D.T end function _rew()return D.R end function _Pata()return D.D end\n-- _Data()返回的数据兼容发光沙漏,_Data(entity)=entity:GetData(),_rew()返回当前是否处于rew状态（不更新数据）,_Pata()返回的数据仅在游戏结束时重置;rewind会触发游戏结束和游戏开始。\n\n-- 2. 用于获取门的编号，无实际效果\nlocal S={{0,1,2,28},{0,nil,2,nil},{nil,1,nil,28},{0,1,2,55,27,nil,29,nil},{nil,1,nil,55},{0,1,4,28,nil,3,nil,30},{0,nil,4,nil},{0,1,4,55,27,3,31,57},{2,28,4,55,27,3,31,57},{0,1,2,55,27,30,31,57},{0,1,4,28,29,3,31,57},{0,1,4,55,27,3,29,30}}function GetDoorId(i,s,r,d)if not d or d<0 then d=0 end return 2*(i%13)+27*(i//13)+S[s][r+1]+d*1e3 end function GetDim()local level=Game():GetLevel()local idx=level:GetCurrentRoomIndex()for d=0,2 do if GetPtrHash(level:GetRoomByIdx(idx,d))==GetPtrHash(level:GetRoomByIdx(idx,-1))then return d end end end\n\n-- 3. 进入新房间时，自动开启地图全部房间和红房间，并移除所有房间的红色标签。\nlocal A,M,T=Isaac.AddCallback,ModCallbacks,{}A(T,M.MC_POST_NEW_ROOM,function()local l,r,s,t,f,g,x,v,e,o,n,a,m=Game():GetLevel(),{},'SafeGridIndex','Data','Flags','GetRooms','GetRoomByIdx','VisitedCount'l:SetCanSeeEverything(true)e,o=function(c,k,d)c[f],d,k=c[v]>0 and c[f]|(1<<10)or ~(1<<10)&c[f],c[t]and c[t].Doors,c[s]if k<0 then return end for j=0,7 do if not d or d&1>0 then l:MakeRedRoomDoor(k,j)l:UncoverHiddenDoor(k,j)end d=d and d>>1 end r[k]=1 end,l[g](l)n=#o e(l[x](l,l:GetCurrentRoomDesc()[s]))while a~=n do a=n for j=1,n do m=l[x](l,o:Get(j-1)[s])if not r[m[s]]then e(m)end end o=l[g](l)n=#o end end)\n\n-- 4.每个房间仅允许进入一次（兼容发光沙漏，不兼容rewind）\n-- 依赖代码1\n-- 依赖代码2\nlocal A,M,T,D=Isaac.AddCallback,ModCallbacks,{},_Data()A(T,M.MC_POST_GAME_STARTED,function(_,c)if not c then D=_Data()D.LastDim,D.Locked,D.Now=-1,{},{}end end)A(T,M.MC_POST_NEW_LEVEL,function()D=_Data()D.LastDim,D.Locked,D.Now=-1,{},{}end)A(T,M.MC_POST_NEW_ROOM,function()D=_Data()for k,v in pairs({['LastDim']=-1,['Locked']={},['Now']={}})do D[k]=D[k]or v end local Dim=GetDim()local level=Game():GetLevel()local desc=level:GetCurrentRoomDesc()local idx=desc.SafeGridIndex local room=Game():GetRoom()if not _rew()then if Dim==D.LastDim and idx>=0 then for k,_ in pairs(D.Now)do D.Locked[k]=true end end D.Now={}end if(idx~=level:GetStartingRoomIndex()or not room:IsFirstVisit())and idx>=0 then local doors=desc.Data and desc.Data.Doors for i=0,7 do if not doors or doors&1>0 then if desc.Data and D.Locked[GetDoorId(idx,desc.Data.Shape,i,Dim)]then room:RemoveDoor(i)end end doors=doors and doors>>1 end end if not _rew()and idx>=0 then for i=0,7 do if room:GetDoor(i)then D.Now[GetDoorId(idx,desc.Data and desc.Data.Shape,i,Dim)]=true end end end D.LastDim=Dim end)\n\n--5. 免疫失忆症、免疫???、辨认传送药、免疫迷途诅咒、免疫混乱诅咒。\nlocal A,M,C,P,T=Isaac.AddCallback,ModCallbacks,LevelCurse,PillEffect,{}A(T,M.MC_USE_PILL,function()Game():GetLevel():RemoveCurses(C.CURSE_OF_THE_LOST)end,P.PILLEFFECT_AMNESIA)A(T,M.MC_USE_PILL,function()Game():GetLevel():RemoveCurses(C.CURSE_OF_MAZE)end,P.PILLEFFECT_QUESTIONMARK)A(T,M.MC_POST_CURSE_EVAL,function(_,c)return ~(C.CURSE_OF_THE_LOST|C.CURSE_OF_MAZE)&c end)A(T,M.MC_GET_PILL_EFFECT,function(_,pillEffect,pillColor)if pillEffect==P.PILLEFFECT_TELEPILLS then Game():GetItemPool():IdentifyPill(pillColor)end end)\n\n--6. 从游戏中移除道具76(X光透视)和道具580(红钥匙)。\nlocal I,C,Y,T,A=Isaac,{76,580},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n\n--7. 从游戏中移除饰品170(水晶钥匙)。\nlocal G,F,b=32768,Isaac.AddCallback,{170}F({},31,function(_,p)for _,i in pairs(b)do if p:HasTrinket(i)then p:TryRemoveTrinket(i)end end end)F({},37,function(_,f,v,s)if v==350 then repeat f=1 for _,i in pairs(b)do if i|G==s|G then f,s=0,s&G|Game():GetItemPool():GetTrinket()break end end until f>0 return{v,s}end end)\n\n--8. 从游戏中移除卡牌78(红钥匙碎片)。\nlocal b,Y,N,F,G={78},true,false,Isaac.AddCallback,Game()F({},31,function(_,p)for _,i in pairs(b)do for s=0,3 do if p:GetCard(s)==i then p:SetCard(s,0)end end end end)F({},37,function(r,f,v,s)if v==300 then repeat f=Y for _,i in pairs(b)do if i==s then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetCardRNG(REPENTANCE_PLUS and -1 or 0)s=G:GetItemPool():GetCard(r:GetSeed(),Y,Y,N)r:Next()break end end until f return{v,s}end end)\n\n--9. 从游戏中移除药丸23(我能永远看清)。\nlocal b,Y,N,F,G,P,E,L,T={23},true,false,Isaac.AddCallback,Game(),'GetItemPool','GetPillEffect','GetPill',{}F(T,31,function(_,p,o)o=G[P](G)for _,i in pairs(b)do for s=0,3 do if o[E](o,p[L](p,s),p)==i then p:SetPill(s,0)end end end end)F(T,37,function(p,f,v,s,r)p=G[P](G)if v==70 then repeat f=Y for _,i in pairs(b)do if i==p[E](p,s)then f,r=N,G:GetRandomPlayer(Vector.Zero,0):GetPillRNG(REPENTANCE_PLUS and -1 or 0)s=p[L](p,r:GetSeed())r:Next()break end end until f return{v,s}end end)\n\n--10. 强制给予玩家道具91(探窟帽)、道具327(全家福)和道具328(底片)。\nIsaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({91,327,328})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n\n--11. 生成迷你绿色堕化雅各吸引玩家，非终点层时，其身边会生成天堂光柱；终点层时，绿色堕化雅各变为R键。\n-- 在头目房内雅各不会生成光柱。\n-- 每被迫使用一次R键，会多一只绿色堕化雅各追逐玩家。\n-- 无法通过发光沙漏回到上一层。\n-- （兼容发光沙漏，不兼容rewind）\n-- 依赖代码1\nlocal Y,N,A,M,T,E,V,Z,R,L,D,S,H=true,false,Isaac.AddCallback,ModCallbacks,{},EntityType.ENTITY_DARK_ESAU,Vector.One,Vector.Zero,Sprite()L,D,H=function()local s=Game():GetLevel():GetAbsoluteStage()if s>10 or s==0 then return Y end end,function(d)if d.SpawnerEntity then return N end local s,G=d.InitSeed,_Data()local chaser=G.Chasers and G.Chasers[s]if chaser then if chaser:Exists()then return Y end G.Chasers[s]=nil end if d.Type==E then d:Remove()end return N end,function(a,b)return a.Position+a.PositionOffset-(b and(b.Position-b.PositionOffset)or Z)end R:Load('gfx/005.100_Collectible.anm2',Y)R:ReplaceSpritesheet(1,Isaac.GetItemConfig():GetCollectible(CollectibleType.COLLECTIBLE_R_KEY).GfxFileName)R:LoadGraphics()R:SetFrame('Idle',1)A(T,M.MC_PRE_USE_ITEM,function(_,_,_,p)local G=Game()local level,room=G:GetLevel(),G:GetRoom()local index=level:GetStartingRoomIndex()if index==level:GetCurrentRoomIndex()and room:IsFirstVisit()then p:AnimateSad()return Y end end,CollectibleType.COLLECTIBLE_GLOWING_HOUR_GLASS)A(T,M.MC_POST_NEW_ROOM,function()for _,e in pairs(Isaac.FindByType(E,0,1))do D(e)end S=N local count,G=0,_Data()G.Chasers=G.Chasers or{}G.Count=G.Count or 1 for _,e in pairs(G.Chasers)do if D(e)then count=count+1 end end for _=count+1,G.Count do local chaser=Isaac.Spawn(E,0,1,Game():GetRoom():GetCenterPos(),Z,nil)G.Chasers[chaser.InitSeed]=chaser end if L()then return end for _,chaser in pairs(G.Chasers)do local heavenDoor=Isaac.Spawn(EntityType.ENTITY_EFFECT,EffectVariant.HEAVEN_LIGHT_DOOR,0,H(chaser),Z,chaser):ToEffect()heavenDoor.Parent=chaser end end)A(T,M.MC_POST_NEW_LEVEL,function()local G=_Data()G.Chasers=G.Chasers or{}for _,e in pairs(G.Chasers)do e:Remove()end end)A(T,M.MC_PRE_NPC_COLLISION,function(_,e,c)c=c:ToPlayer()if D(e)then if c then local r=Game():GetRoom()if L()then local G=_Data()G.Count=G.Count+1 c:UseActiveItem(CollectibleType.COLLECTIBLE_R_KEY)elseif not r:IsClear()and r:GetType()~=RoomType.ROOM_BOSS then S=Y r:TriggerClear()c:AnimateSad()end end return Y end end,E)A(T,M.MC_NPC_UPDATE,function(_,e)if D(e)then e.EntityCollisionClass=EntityCollisionClass.ENTCOLL_PLAYERONLY e:AddVelocity(.1*Vector.FromAngle(Random())+.3*H(Game():GetRandomPlayer(Z,0),e):Normalized())for i=1,Game():GetNumPlayers()do local p=Isaac.GetPlayer(i-1)if not p.Parent then e.Target=p break end end for k,v in pairs(_Data().Chasers)do if e.InitSeed~=k then local d=H(e,v)e:AddVelocity(d:Length()<40 and d:Normalized()or Z)end end end end,E)A(T,M.MC_POST_NPC_RENDER,function(_,e,o)if D(e)then if L()then e.Visible=N e.SizeMulti=V R:Render(Isaac.WorldToRenderPosition(H(e))+o+Vector(0,10))else e.Color=Color(0,1,0,1)e.Visible=Y end end end,E)A(T,M.MC_POST_EFFECT_UPDATE,function(_,e)if e.SubType==1 then return end local p=e.Parent if p then for i=1,Game():GetNumPlayers()do local r=Isaac.GetPlayer(i-1)local d=H(e,r)if not r.Parent and d:Length()<50 then r:AddVelocity(d:Normalized())end end p.SpriteScale=.5*V p.SizeMulti=2.5*V e.Position=H(p)e:FollowParent(p)else e:Remove()end end,EffectVariant.HEAVEN_LIGHT_DOOR)A(T,M.MC_PRE_SPAWN_CLEAN_AWARD,function()return S end)\n\n--12. [不适配手柄]禁止玩家暂停游戏、禁止使用控制台(忏悔+不生效)；可使用Esc返回游戏菜单\nlocal A,B,M,T,O,P=Isaac.AddCallback,ButtonAction,ModCallbacks,{},Options,'PauseOnFocusLost'A(T,M.MC_POST_RENDER,function()O[P]=false for i=1,Game():GetNumPlayers()do local c=Isaac.GetPlayer(i-1).ControllerIndex if Input.IsActionPressed(B.ACTION_MENUBACK,c)then Game():Fadeout(1,2)end end end)A(T,M.MC_INPUT_ACTION,function(_,_,h,b)if b==B.ACTION_CONSOLE or b==B.ACTION_PAUSE then return h==InputHook.GET_ACTION_VALUE and 0 or false end end)A(T,M.MC_PRE_MOD_UNLOAD,function()O[P]=true end)\n--."}, "16.投币攻击.lua": {"raw": "--投币攻击\n--角色限定：堕化店主\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n--1. 强制敌人变为精英怪(不包括6无敌变种和25彩虹变种)。\nl local A,C={[0]=1,[1]=1,[2]=1,[3]=1,[4]=1,[5]=1,[6]=0,[7]=1,[8]=1,[9]=1,[10]=1,[11]=1,[12]=1,[13]=1,[14]=1,[15]=1,[16]=1,[17]=1,[18]=1,[19]=1,[20]=1,[21]=1,[22]=1,[23]=1,[24]=1,[25]=0},{}for k,v in pairs(A)do for _=1,v do C[#C+1]=k end end Isaac.AddCallback({}, ModCallbacks.MC_NPC_UPDATE, function(_,e)if e:IsVulnerableEnemy()and e:IsActiveEnemy(false)and not e:IsBoss()and not e:IsInvincible() and not e:IsChampion()then e:MakeChampion(e.InitSeed,C[e.InitSeed%#C+1])end end)\n\n\n--2. 强制给予玩家道具202(弥达斯之触)、227(小猪存钱罐)、295(魔术手指)、304(天秤座)、416(深口袋)、501(贪婪的胃袋)、道具590(水星)。\nl Isaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({202,227,295,304,416,501,590})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n\n--3. 强制玩家变为堕化店主，给予副手道具金剃刀片，移动速度变为金钱数量*0.003\nl local A,M,T=Isaac.AddCallback,ModCallbacks,{}A(T,M.MC_POST_PEFFECT_UPDATE,function(_,p)p.MoveSpeed=3e-3+3e-3*p:GetNumCoins()end)A(T,M.MC_POST_PLAYER_UPDATE,function(_,p)local k,c,s=PlayerType.PLAYER_KEEPER_B,CollectibleType.COLLECTIBLE_GOLDEN_RAZOR,ActiveSlot.SLOT_POCKET if k~=p:GetPlayerType()then p:ChangePlayerType(k)end if c~=p:GetActiveItem(s)then p:SetPocketActiveItem(c,s,true)end end)\n\n--4. 黏币变为镍币\nl Isaac.AddCallback({},ModCallbacks.MC_POST_PICKUP_INIT,function(_,p)if p.SubType==CoinSubType.COIN_STICKYNICKEL then p:Morph(p.Type,p.Variant,CoinSubType.COIN_NICKEL,true)end end,PickupVariant.PICKUP_COIN)\n\n--5. 角色吸引硬币\nl Isaac.AddCallback({},ModCallbacks.MC_POST_PICKUP_UPDATE,function(_,p)local e,l=Game():GetNearestPlayer(p.Position+p.PositionOffset)l=e.Position+e.PositionOffset-p.Position-p.PositionOffset p.Velocity=3*(l:Length()>10 and math.log(l:Length())or 0)*l:Normalized()p.GridCollisionClass=EntityGridCollisionClass.GRIDCOLL_NONE end,PickupVariant.PICKUP_COIN)\n\n--6. 角色使用道具魔术手指的同时，在原地生成三滴眼泪；眼泪会追踪敌人，命中敌人后生成硬币\nl local A,M,T=Isaac.AddCallback,ModCallbacks,{T={}}A(T,M.MC_USE_ITEM,function(_,_,_,p)for _=1,3 do local t=p:FireTear(p.Position+p.PositionOffset,Vector.Zero)t.TearFlags=t.TearFlags|TearFlags.TEAR_HOMING end end,CollectibleType.COLLECTIBLE_MAGIC_FINGERS)A(T,M.MC_POST_NEW_ROOM,function()T.T={}end)A(T,M.MC_PRE_TEAR_COLLISION,function(_,t,c)if c:IsVulnerableEnemy()and c:IsActiveEnemy(false)then T.T[t.InitSeed]=true end end)A(T,M.MC_POST_ENTITY_REMOVE,function(_,e)if T.T[e.InitSeed]then Isaac.Spawn(EntityType.ENTITY_PICKUP,PickupVariant.PICKUP_COIN,CoinSubType.COIN_PENNY,e.Position+e.PositionOffset,Vector.Zero,nil)T.T[e.InitSeed]=nil end end,EntityType.ENTITY_TEAR)\n\n--7. 长按道具键/副手键1s以上=连续多次按键\nl local A,M,H,B,K,G=Isaac.AddCallback,ModCallbacks,GetPtrHash,ButtonAction,{'ACTION_ITEM','ACTION_PILLCARD'},{M={}}A(G.M,M.MC_POST_PLAYER_RENDER,function(_,p)local k,n,a=H(p)G[k]=G[k]or{}n=G[k]for _,b in pairs(K)do a=B[b]if Input.IsActionPressed(a,p.ControllerIndex)then n[a]=n[a]or Isaac.GetTime()else n[a]=nil end end end)A(G.M,M.MC_INPUT_ACTION,function(_,e,_,a)e=e and e:ToPlayer()if e then local k,t,s=H(e),Isaac.GetTime()s=G[k]and G[k][a]if s and s<t then return t>1e3+s end end end,InputHook.IS_ACTION_TRIGGERED)A(G.M,M.MC_POST_ENTITY_REMOVE,function(_,e)G[H(e)]=nil end,EntityType.ENTITY_PLAYER)\n\n--8. 非任务道具替换为以下道具之一：道具36(大便)、道具74(25美分)、道具667(稻草人)\nl local I,C=Isaac,{36,74,667}I.AddCallback({},ModCallbacks.MC_POST_PICKUP_INIT,function(_,p)local s=p.SubType if not I.GetItemConfig():GetCollectible(s):HasTags(ItemConfig.TAG_QUEST)then for _,v in pairs(C)do if v==s then return end end local r=RNG()r:SetSeed(p.InitSeed,35)p:Morph(p.Type,p.Variant,C[r:RandomInt(#C)+1],true,true)end end,PickupVariant.PICKUP_COLLECTIBLE)\n\n--9. 非主角色透明度降低为0.3\nl Isaac.AddCallback({},ModCallbacks.MC_POST_PLAYER_RENDER,function(_,p)if p.Parent then local c=p.Color p.Color=Color(c.R,c.G,c.B,0.3,c.RO,c.GO,c.BO)end end)\n--.", "cleaned": "--投币攻击\n--角色限定：堕化店主\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n--1. 强制敌人变为精英怪(不包括6无敌变种和25彩虹变种)。\nlocal A,C={[0]=1,[1]=1,[2]=1,[3]=1,[4]=1,[5]=1,[6]=0,[7]=1,[8]=1,[9]=1,[10]=1,[11]=1,[12]=1,[13]=1,[14]=1,[15]=1,[16]=1,[17]=1,[18]=1,[19]=1,[20]=1,[21]=1,[22]=1,[23]=1,[24]=1,[25]=0},{}for k,v in pairs(A)do for _=1,v do C[#C+1]=k end end Isaac.AddCallback({}, ModCallbacks.MC_NPC_UPDATE, function(_,e)if e:IsVulnerableEnemy()and e:IsActiveEnemy(false)and not e:IsBoss()and not e:IsInvincible() and not e:IsChampion()then e:MakeChampion(e.InitSeed,C[e.InitSeed%#C+1])end end)\n\n\n--2. 强制给予玩家道具202(弥达斯之触)、227(小猪存钱罐)、295(魔术手指)、304(天秤座)、416(深口袋)、501(贪婪的胃袋)、道具590(水星)。\nIsaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({202,227,295,304,416,501,590})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n\n--3. 强制玩家变为堕化店主，给予副手道具金剃刀片，移动速度变为金钱数量*0.003\nlocal A,M,T=Isaac.AddCallback,ModCallbacks,{}A(T,M.MC_POST_PEFFECT_UPDATE,function(_,p)p.MoveSpeed=3e-3+3e-3*p:GetNumCoins()end)A(T,M.MC_POST_PLAYER_UPDATE,function(_,p)local k,c,s=PlayerType.PLAYER_KEEPER_B,CollectibleType.COLLECTIBLE_GOLDEN_RAZOR,ActiveSlot.SLOT_POCKET if k~=p:GetPlayerType()then p:ChangePlayerType(k)end if c~=p:GetActiveItem(s)then p:SetPocketActiveItem(c,s,true)end end)\n\n--4. 黏币变为镍币\nIsaac.AddCallback({},ModCallbacks.MC_POST_PICKUP_INIT,function(_,p)if p.SubType==CoinSubType.COIN_STICKYNICKEL then p:Morph(p.Type,p.Variant,CoinSubType.COIN_NICKEL,true)end end,PickupVariant.PICKUP_COIN)\n\n--5. 角色吸引硬币\nIsaac.AddCallback({},ModCallbacks.MC_POST_PICKUP_UPDATE,function(_,p)local e,l=Game():GetNearestPlayer(p.Position+p.PositionOffset)l=e.Position+e.PositionOffset-p.Position-p.PositionOffset p.Velocity=3*(l:Length()>10 and math.log(l:Length())or 0)*l:Normalized()p.GridCollisionClass=EntityGridCollisionClass.GRIDCOLL_NONE end,PickupVariant.PICKUP_COIN)\n\n--6. 角色使用道具魔术手指的同时，在原地生成三滴眼泪；眼泪会追踪敌人，命中敌人后生成硬币\nlocal A,M,T=Isaac.AddCallback,ModCallbacks,{T={}}A(T,M.MC_USE_ITEM,function(_,_,_,p)for _=1,3 do local t=p:FireTear(p.Position+p.PositionOffset,Vector.Zero)t.TearFlags=t.TearFlags|TearFlags.TEAR_HOMING end end,CollectibleType.COLLECTIBLE_MAGIC_FINGERS)A(T,M.MC_POST_NEW_ROOM,function()T.T={}end)A(T,M.MC_PRE_TEAR_COLLISION,function(_,t,c)if c:IsVulnerableEnemy()and c:IsActiveEnemy(false)then T.T[t.InitSeed]=true end end)A(T,M.MC_POST_ENTITY_REMOVE,function(_,e)if T.T[e.InitSeed]then Isaac.Spawn(EntityType.ENTITY_PICKUP,PickupVariant.PICKUP_COIN,CoinSubType.COIN_PENNY,e.Position+e.PositionOffset,Vector.Zero,nil)T.T[e.InitSeed]=nil end end,EntityType.ENTITY_TEAR)\n\n--7. 长按道具键/副手键1s以上=连续多次按键\nlocal A,M,H,B,K,G=Isaac.AddCallback,ModCallbacks,GetPtrHash,ButtonAction,{'ACTION_ITEM','ACTION_PILLCARD'},{M={}}A(G.M,M.MC_POST_PLAYER_RENDER,function(_,p)local k,n,a=H(p)G[k]=G[k]or{}n=G[k]for _,b in pairs(K)do a=B[b]if Input.IsActionPressed(a,p.ControllerIndex)then n[a]=n[a]or Isaac.GetTime()else n[a]=nil end end end)A(G.M,M.MC_INPUT_ACTION,function(_,e,_,a)e=e and e:ToPlayer()if e then local k,t,s=H(e),Isaac.GetTime()s=G[k]and G[k][a]if s and s<t then return t>1e3+s end end end,InputHook.IS_ACTION_TRIGGERED)A(G.M,M.MC_POST_ENTITY_REMOVE,function(_,e)G[H(e)]=nil end,EntityType.ENTITY_PLAYER)\n\n--8. 非任务道具替换为以下道具之一：道具36(大便)、道具74(25美分)、道具667(稻草人)\nlocal I,C=Isaac,{36,74,667}I.AddCallback({},ModCallbacks.MC_POST_PICKUP_INIT,function(_,p)local s=p.SubType if not I.GetItemConfig():GetCollectible(s):HasTags(ItemConfig.TAG_QUEST)then for _,v in pairs(C)do if v==s then return end end local r=RNG()r:SetSeed(p.InitSeed,35)p:Morph(p.Type,p.Variant,C[r:RandomInt(#C)+1],true,true)end end,PickupVariant.PICKUP_COLLECTIBLE)\n\n--9. 非主角色透明度降低为0.3\nIsaac.AddCallback({},ModCallbacks.MC_POST_PLAYER_RENDER,function(_,p)if p.Parent then local c=p.Color p.Color=Color(c.R,c.G,c.B,0.3,c.RO,c.GO,c.BO)end end)\n--."}, "17.寂.lua": {"raw": "--寂\n--禁止回溯路线\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n--1.所有房间自动清理，并完全陷入黑暗。无法记忆地图。\nl Isaac.AddCallback({},ModCallbacks.MC_POST_NEW_ROOM,function()local R,T,l,m,t,s,r=RoomDescriptor,RoomType.ROOM_BOSS,Game():GetLevel(),Game():GetRoom(),{}s=l:GetRooms()for i=-18,-1 do t[#t+1]=i end for i=1,#s do t[#t+1]=s:Get(i-1).SafeGridIndex end for _,i in pairs(t)do r=l:GetRoomByIdx(i)r.DisplayFlags,r.Flags=RoomDescriptor.DISPLAY_NONE,r.Flags|R.FLAG_CLEAR|R.FLAG_CHALLENGE_DONE|R.FLAG_PITCH_BLACK|R.FLAG_CURSED_MIST|(r.Data and r.Data.Type~=T and R.FLAG_NO_REWARD or 0)end if m:IsFirstVisit()and T==m:GetType()then m:TriggerClear()end end)\n--.", "cleaned": "--寂\n--禁止回溯路线\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n--1.所有房间自动清理，并完全陷入黑暗。无法记忆地图。\nIsaac.AddCallback({},ModCallbacks.MC_POST_NEW_ROOM,function()local R,T,l,m,t,s,r=RoomDescriptor,RoomType.ROOM_BOSS,Game():GetLevel(),Game():GetRoom(),{}s=l:GetRooms()for i=-18,-1 do t[#t+1]=i end for i=1,#s do t[#t+1]=s:Get(i-1).SafeGridIndex end for _,i in pairs(t)do r=l:GetRoomByIdx(i)r.DisplayFlags,r.Flags=RoomDescriptor.DISPLAY_NONE,r.Flags|R.FLAG_CLEAR|R.FLAG_CHALLENGE_DONE|R.FLAG_PITCH_BLACK|R.FLAG_CURSED_MIST|(r.Data and r.Data.Type~=T and R.FLAG_NO_REWARD or 0)end if m:IsFirstVisit()and T==m:GetType()then m:TriggerClear()end end)\n--."}, "18.自选双子.lua": {"raw": "--自选双子\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n--1. 每开始新游戏时，主角色P1为当前角色、副角色P2为上一轮游戏的P1，可通过连续开始两次新游戏实现自选双子进行游戏。\n--仅支持单人角色的搭配，不支持雅各&以扫、(堕化)遗骸、(堕化、长子权)拉撒路。\n--按住丢弃键切换两位玩家HUD显示，两位角色的复活道具分开计算，其余逻辑与雅各&以扫一致。\nl local B,F,G,H,I,K,M,O,Q,T,U,W,X,Y,Z,Ad,Ca,In,Ma,Un,Et,Ev,Gp,A,C,D,E,J,L,N,P,R,S,V,Sp,Pr,Up,Tr,Gv,P1,P2,Bb=ButtonAction,'Parent',function()return Game():GetNumPlayers()end,GetPtrHash,InputHook,Isaac,ModCallbacks,'Position','PositionOffset',{},'Size','MoveSpeed','ControllerIndex','GetDamageCooldown','SetMinDamageCooldown','AddCacheFlags',CacheFlag,Input,math,table.unpack,EntityType,'EvaluateItems','GetPlayerType'Sp,R,Tr,Gv,V,A,P,D,L,N,S=Ca.CACHE_SPEED,In.IsActionPressed,In.IsActionTriggered,In.GetActionValue,M.MC_POST_PLAYER_UPDATE,K.AddCallback,K.GetPlayer,B.ACTION_DROP,{B.ACTION_LEFT,B.ACTION_RIGHT,B.ACTION_UP,B.ACTION_DOWN},{B.ACTION_ITEM,B.ACTION_PILLCARD},{B.ACTION_SHOOTLEFT,B.ACTION_SHOOTRIGHT,B.ACTION_SHOOTUP,B.ACTION_SHOOTDOWN}A(T,M.MC_EVALUATE_CACHE,function(_,e)if J and 1<G()then local a,b,h,v=P(),P(1),H(e)if h==H(a)then C=a[W]elseif h==H(b)then E=b[W]end if C and E then v=(C+E)/2 a[W],b[W]=v,v elseif C then b[Ad](b,Sp)b[Ev](b)elseif E then a[Ad](a,Sp)a[Ev](a)end end end,Sp)A(T,M.MC_POST_PEFFECT_UPDATE,function(_,p)p[W]=Ma.min(2,p[W])end)A(T,V,function(_,p)local e,f,h,r,x,y,z=P(),P(1),H(p)P1=P1 or e[Gp](e)if J then x=e[X]r=R(D,x)if P2 and 2>G()then K.ExecuteCommand('addplayer '..P2..' '..x)P(1)[F],Up=e,true return end y,z=H(e),H(f)if h==z then if Up or r and not Pr or not r and Pr then p[F],Up=not r and e or nil,false Game():GetHUD():AssignPlayerHUDs()end Pr,p[F]=r end if(p:IsDead()and not p:WillPlayerRevive()or p:IsCoopGhost())and(h==y or h==z)and y~=z then e:Kill()f:Kill()end end end)A(T,V,function(_,p)local a,b,h,e,v,s,t=P(),P(1),H(p)if 1<G()then s,t=a[Y](a),b[Y](b)if 1<Ma.abs(s-t)then a[Z](a,t)b[Z](b,s)end e=h==H(a)and b or h==H(b)and a if e then v=p[O]+p[Q]-e[O]-e[Q]if p[U]+e[U]>v:Length()then p:AddVelocity(.1*v:Normalized())end end end end)A(T,M.MC_POST_PLAYER_RENDER,function(_,p,o)local s,h,d,l=o+K.WorldToRenderPosition(p.Position+p.PositionOffset),H(p)d=h==H(P())and'P1'or h==H(P(1))and'P2'l=K.GetTextWidth(d)K.RenderText(d,s.X-l/2,s.Y,1,1,1,1)end)A(T,M.MC_INPUT_ACTION,function(_,e,h,a)e=e and e:ToPlayer()if e then local d,q,s,p,x,r,f,z,j,k,l=P(),H(P(1)),H(e)p,x=H(d),d[X]r,j,k,l=R(D,x),R(a,x),Tr(a,x),Gv(a,x)if h==I.IS_ACTION_PRESSED then f,z=false,j elseif h==I.IS_ACTION_TRIGGERED then f,z=false,k elseif h==I.GET_ACTION_VALUE then f,z=0,l end for _,v in pairs(N)do if a==v then if s==p and not r or s==q and r then return z else return f end end end if a==B.ACTION_BOMB then if s==p then Bb=0<e:GetNumBombs()elseif s==q and k and Bb and not e:HasGoldenBomb()then e:AddBombs(1)end end if s==q then for _,v in pairs(L)do if a==v then return not r and z or f end end end if a==D then for _,v in pairs({Un(L),Un(S)})do if R(v,x)or Tr(v,x)or 0<Gv(v,x)then return f end end end end end)A(T,M.MC_POST_GAME_STARTED,function(_,c)J=true if not c then P1,P2=P()[Gp](P()),P1 end if 1<G()then for i=0,1 do local p=P(i)p[Ad](p,Ca.CACHE_ALL)p[Ev](p)end end end)A(T,M.MC_PRE_GAME_EXIT,function()if 1<G()then P(1)[F],C,E=P()end J=false end)A(T,M.MC_PRE_ENTITY_SPAWN,function(_,t,v)if t==Et.ENTITY_SLOT and v==19 then return{Et.ENTITY_EFFECT,EffectVariant.EFFECT_NULL}end end)\n\n--2. 从游戏中移除道具482(遥控器)\nl local I,C,Y,T,A=Isaac,{482},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n--.", "cleaned": "--自选双子\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n--1. 每开始新游戏时，主角色P1为当前角色、副角色P2为上一轮游戏的P1，可通过连续开始两次新游戏实现自选双子进行游戏。\n--仅支持单人角色的搭配，不支持雅各&以扫、(堕化)遗骸、(堕化、长子权)拉撒路。\n--按住丢弃键切换两位玩家HUD显示，两位角色的复活道具分开计算，其余逻辑与雅各&以扫一致。\nlocal B,F,G,H,I,K,M,O,Q,T,U,W,X,Y,Z,Ad,Ca,In,Ma,Un,Et,Ev,Gp,A,C,D,E,J,L,N,P,R,S,V,Sp,Pr,Up,Tr,Gv,P1,P2,Bb=ButtonAction,'Parent',function()return Game():GetNumPlayers()end,GetPtrHash,InputHook,Isaac,ModCallbacks,'Position','PositionOffset',{},'Size','MoveSpeed','ControllerIndex','GetDamageCooldown','SetMinDamageCooldown','AddCacheFlags',CacheFlag,Input,math,table.unpack,EntityType,'EvaluateItems','GetPlayerType'Sp,R,Tr,Gv,V,A,P,D,L,N,S=Ca.CACHE_SPEED,In.IsActionPressed,In.IsActionTriggered,In.GetActionValue,M.MC_POST_PLAYER_UPDATE,K.AddCallback,K.GetPlayer,B.ACTION_DROP,{B.ACTION_LEFT,B.ACTION_RIGHT,B.ACTION_UP,B.ACTION_DOWN},{B.ACTION_ITEM,B.ACTION_PILLCARD},{B.ACTION_SHOOTLEFT,B.ACTION_SHOOTRIGHT,B.ACTION_SHOOTUP,B.ACTION_SHOOTDOWN}A(T,M.MC_EVALUATE_CACHE,function(_,e)if J and 1<G()then local a,b,h,v=P(),P(1),H(e)if h==H(a)then C=a[W]elseif h==H(b)then E=b[W]end if C and E then v=(C+E)/2 a[W],b[W]=v,v elseif C then b[Ad](b,Sp)b[Ev](b)elseif E then a[Ad](a,Sp)a[Ev](a)end end end,Sp)A(T,M.MC_POST_PEFFECT_UPDATE,function(_,p)p[W]=Ma.min(2,p[W])end)A(T,V,function(_,p)local e,f,h,r,x,y,z=P(),P(1),H(p)P1=P1 or e[Gp](e)if J then x=e[X]r=R(D,x)if P2 and 2>G()then K.ExecuteCommand('addplayer '..P2..' '..x)P(1)[F],Up=e,true return end y,z=H(e),H(f)if h==z then if Up or r and not Pr or not r and Pr then p[F],Up=not r and e or nil,false Game():GetHUD():AssignPlayerHUDs()end Pr,p[F]=r end if(p:IsDead()and not p:WillPlayerRevive()or p:IsCoopGhost())and(h==y or h==z)and y~=z then e:Kill()f:Kill()end end end)A(T,V,function(_,p)local a,b,h,e,v,s,t=P(),P(1),H(p)if 1<G()then s,t=a[Y](a),b[Y](b)if 1<Ma.abs(s-t)then a[Z](a,t)b[Z](b,s)end e=h==H(a)and b or h==H(b)and a if e then v=p[O]+p[Q]-e[O]-e[Q]if p[U]+e[U]>v:Length()then p:AddVelocity(.1*v:Normalized())end end end end)A(T,M.MC_POST_PLAYER_RENDER,function(_,p,o)local s,h,d,l=o+K.WorldToRenderPosition(p.Position+p.PositionOffset),H(p)d=h==H(P())and'P1'or h==H(P(1))and'P2'l=K.GetTextWidth(d)K.RenderText(d,s.X-l/2,s.Y,1,1,1,1)end)A(T,M.MC_INPUT_ACTION,function(_,e,h,a)e=e and e:ToPlayer()if e then local d,q,s,p,x,r,f,z,j,k,l=P(),H(P(1)),H(e)p,x=H(d),d[X]r,j,k,l=R(D,x),R(a,x),Tr(a,x),Gv(a,x)if h==I.IS_ACTION_PRESSED then f,z=false,j elseif h==I.IS_ACTION_TRIGGERED then f,z=false,k elseif h==I.GET_ACTION_VALUE then f,z=0,l end for _,v in pairs(N)do if a==v then if s==p and not r or s==q and r then return z else return f end end end if a==B.ACTION_BOMB then if s==p then Bb=0<e:GetNumBombs()elseif s==q and k and Bb and not e:HasGoldenBomb()then e:AddBombs(1)end end if s==q then for _,v in pairs(L)do if a==v then return not r and z or f end end end if a==D then for _,v in pairs({Un(L),Un(S)})do if R(v,x)or Tr(v,x)or 0<Gv(v,x)then return f end end end end end)A(T,M.MC_POST_GAME_STARTED,function(_,c)J=true if not c then P1,P2=P()[Gp](P()),P1 end if 1<G()then for i=0,1 do local p=P(i)p[Ad](p,Ca.CACHE_ALL)p[Ev](p)end end end)A(T,M.MC_PRE_GAME_EXIT,function()if 1<G()then P(1)[F],C,E=P()end J=false end)A(T,M.MC_PRE_ENTITY_SPAWN,function(_,t,v)if t==Et.ENTITY_SLOT and v==19 then return{Et.ENTITY_EFFECT,EffectVariant.EFFECT_NULL}end end)\n\n--2. 从游戏中移除道具482(遥控器)\nlocal I,C,Y,T,A=Isaac,{482},true,{}A=I.AddCallback A(T,23,function(_,c)for _,v in pairs(C)do if c==v then return Y end end end)A(T,31,function(_,p)for _,i in pairs(C)do for _=1,p:GetCollectibleNum(i)do p:RemoveCollectible(i)end end end)A(T,37,function(p,f,v,s)if v==100 then repeat p,f=Game():GetItemPool()for _,i in pairs(C)do if i==s then f,s=1,p:GetCollectible(p:GetLastPool(),Y)break end end until not f return{v,s}end end)\n--."}, "19.网络延迟.lua": {"raw": "--网络延迟\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 将玩家的输入延迟15帧（0.25秒），可在控制台输入l Lag = 数值 来调整延迟帧数。\nl Lag = 10 local B,C,H,I,M,N,O,T,A,G=table,'ControllerIndex',InputHook,Isaac,ModCallbacks,Input,{},{}A,G=I.AddCallback,I.GetFrameCount A(T,M.MC_POST_PLAYER_RENDER,function(_,p)local t={i=p[C],t=G(),o={}}for k,v in pairs(ButtonAction)do t.o[v]={a=N.IsActionTriggered(v,t.i),p=N.IsActionPressed(v,t.i),v=N.GetActionValue(v,t.i)}end B.insert(O,t)end)A(T,M.MC_INPUT_ACTION,function(_,e,h,a)e=e and e:ToPlayer()local t,r,v=G()for k=#O,1,-1 do v=O[k]r=t-v.t-Lag if r>0 then B.remove(O,k)elseif e and v.i==e[C]and r==0 then if h==H.GET_ACTION_VALUE then return v.o[a].v elseif h==H.IS_ACTION_PRESSED then return v.o[a].p elseif h==H.IS_ACTION_TRIGGERED then return v.o[a].a end end end end)\n--.", "cleaned": "--网络延迟\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 将玩家的输入延迟15帧（0.25秒），可在控制台输入l Lag = 数值 来调整延迟帧数。\nLag = 10 local B,C,H,I,M,N,O,T,A,G=table,'ControllerIndex',InputHook,Isaac,ModCallbacks,Input,{},{}A,G=I.AddCallback,I.GetFrameCount A(T,M.MC_POST_PLAYER_RENDER,function(_,p)local t={i=p[C],t=G(),o={}}for k,v in pairs(ButtonAction)do t.o[v]={a=N.IsActionTriggered(v,t.i),p=N.IsActionPressed(v,t.i),v=N.GetActionValue(v,t.i)}end B.insert(O,t)end)A(T,M.MC_INPUT_ACTION,function(_,e,h,a)e=e and e:ToPlayer()local t,r,v=G()for k=#O,1,-1 do v=O[k]r=t-v.t-Lag if r>0 then B.remove(O,k)elseif e and v.i==e[C]and r==0 then if h==H.GET_ACTION_VALUE then return v.o[a].v elseif h==H.IS_ACTION_PRESSED then return v.o[a].p elseif h==H.IS_ACTION_TRIGGERED then return v.o[a].a end end end end)\n--."}, "20.风雨交加.lua": {"raw": "--风雨交加\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 房间中吹起微风，可在控制台输入lua Windy = 数值 来调整风力系数(默认25)。\n--屏幕上方会显示当前房间的风力大小，风力大小和楼层数、房间难度和风力系数有关。\n--风会从进入房间的门吹向其他门，实体会被风吹动。\nl Windy=25;local C,I,M,V,T,A=0,Isaac,ModCallbacks,Vector,{}A=I.AddCallback A(T,M.MC_POST_UPDATE,function()for _,v in pairs(I.GetRoomEntities())do if not v:ToEffect()then local O,Z,R=0,V.Zero,Game():GetRoom()for i=0,7 do if R:GetDoor(i)then O,L=O+1,v.Position+v.PositionOffset-R:GetDoorSlotPosition(i)Z=Z+C/v.Mass*(i==Game():GetLevel().EnterDoor and 1 or -1)*L:Normalized()/(L:Length()+40)end end v:AddVelocity((O==1 and -1 or 1)*Z/math.max(1,O))end end end)A(T,M.MC_POST_NEW_ROOM,function()local L=Game():GetLevel()C=Windy*L:GetCurrentRoomDesc().Data.Difficulty*(L:GetStage()/10+1)end)A(T,M.MC_POST_RENDER,function()local t=string.format('%.2f',C/100)I.RenderText(t,(I.GetScreenWidth()-I.GetTextWidth(t))/2,I.GetScreenHeight()/16,0,1,0,1)end)\n\n--2. 实体的加速度变小，可在控制台输入lua Inertia = 数值 来调整系数(默认30)。\n-- 加速度变动为原先的Inertia%，Inertia取值范围0~100。\nl Inertia=30;local H,I,M,T,X,U,V,A=GetPtrHash,Isaac,ModCallbacks,{},math,'Velocity',{}A=I.AddCallback A(T,M.MC_POST_UPDATE,function()for _,v in pairs(I.GetRoomEntities())do if not v:ToEffect()then local p,h=X.min(100,X.max(0,Inertia))/100,H(v)if V[h]then v[U]=v[U]*p+V[h]*(1-p)end V[h]=v[U]end end end)A(T,M.MC_POST_NEW_ROOM,function()V={}end)\n\n--3. 屏幕变黑，周期性被照明，可在控制台输入lua Thunder = 数值 来调整照明时间(默认2秒)。\nl Thunder=2;local I,V,B=Isaac,Vector,Sprite()B:Load('gfx/ui/loading.anm2',true)B:Play('1',true)B.Scale=V.One*9 I.AddCallback({},ModCallbacks.MC_POST_RENDER,function()local p,t=Thunder t=Game():GetFrameCount()/30%(3*p)B.Color=Color(1,1,1,math.max(1-8*t,1-(t/p-3)^2/4))B:RenderLayer(0,V.Zero)end)\n\n--4. 播放雷声，房间中有雷声和雨滴效果，房间地面有积水效果。\nl local I,F,M,D,O,P,T,A=Isaac,'Flags',ModCallbacks,{'THUNDER'},RoomDescriptor,{'HAS_WATER','FLOODED'},{}A=I.AddCallback A(T,M.MC_POST_UPDATE,function()local S=SFXManager()for k,v in pairs(D)do local s=SoundEffect['SOUND_'..v]if not S:IsPlaying(s)then S:Play(s,1,0,false)end end for i=1,3 do I.Spawn(EntityType.ENTITY_EFFECT,EffectVariant.RAIN_DROP,0,I.GetRandomPosition(),Vector.Zero,nil):AddEntityFlags(EntityFlag.FLAG_PERSISTENT)end end)A(T,ModCallbacks.MC_POST_NEW_ROOM,function()local L,R=Game():GetLevel()R=L:GetRooms()for i=1,#R do local r=L:GetRoomByIdx(R:Get(i-1).SafeGridIndex)for k,v in pairs(P)do r[F]=O['FLAG_'..v]|r[F]end end end)\n--.", "cleaned": "--风雨交加\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 房间中吹起微风，可在控制台输入lua Windy = 数值 来调整风力系数(默认25)。\n--屏幕上方会显示当前房间的风力大小，风力大小和楼层数、房间难度和风力系数有关。\n--风会从进入房间的门吹向其他门，实体会被风吹动。\nWindy=25;local C,I,M,V,T,A=0,Isaac,ModCallbacks,Vector,{}A=I.AddCallback A(T,M.MC_POST_UPDATE,function()for _,v in pairs(I.GetRoomEntities())do if not v:ToEffect()then local O,Z,R=0,V.Zero,Game():GetRoom()for i=0,7 do if R:GetDoor(i)then O,L=O+1,v.Position+v.PositionOffset-R:GetDoorSlotPosition(i)Z=Z+C/v.Mass*(i==Game():GetLevel().EnterDoor and 1 or -1)*L:Normalized()/(L:Length()+40)end end v:AddVelocity((O==1 and -1 or 1)*Z/math.max(1,O))end end end)A(T,M.MC_POST_NEW_ROOM,function()local L=Game():GetLevel()C=Windy*L:GetCurrentRoomDesc().Data.Difficulty*(L:GetStage()/10+1)end)A(T,M.MC_POST_RENDER,function()local t=string.format('%.2f',C/100)I.RenderText(t,(I.GetScreenWidth()-I.GetTextWidth(t))/2,I.GetScreenHeight()/16,0,1,0,1)end)\n\n--2. 实体的加速度变小，可在控制台输入lua Inertia = 数值 来调整系数(默认30)。\n-- 加速度变动为原先的Inertia%，Inertia取值范围0~100。\nInertia=30;local H,I,M,T,X,U,V,A=GetPtrHash,Isaac,ModCallbacks,{},math,'Velocity',{}A=I.AddCallback A(T,M.MC_POST_UPDATE,function()for _,v in pairs(I.GetRoomEntities())do if not v:ToEffect()then local p,h=X.min(100,X.max(0,Inertia))/100,H(v)if V[h]then v[U]=v[U]*p+V[h]*(1-p)end V[h]=v[U]end end end)A(T,M.MC_POST_NEW_ROOM,function()V={}end)\n\n--3. 屏幕变黑，周期性被照明，可在控制台输入lua Thunder = 数值 来调整照明时间(默认2秒)。\nThunder=2;local I,V,B=Isaac,Vector,Sprite()B:Load('gfx/ui/loading.anm2',true)B:Play('1',true)B.Scale=V.One*9 I.AddCallback({},ModCallbacks.MC_POST_RENDER,function()local p,t=Thunder t=Game():GetFrameCount()/30%(3*p)B.Color=Color(1,1,1,math.max(1-8*t,1-(t/p-3)^2/4))B:RenderLayer(0,V.Zero)end)\n\n--4. 播放雷声，房间中有雷声和雨滴效果，房间地面有积水效果。\nlocal I,F,M,D,O,P,T,A=Isaac,'Flags',ModCallbacks,{'THUNDER'},RoomDescriptor,{'HAS_WATER','FLOODED'},{}A=I.AddCallback A(T,M.MC_POST_UPDATE,function()local S=SFXManager()for k,v in pairs(D)do local s=SoundEffect['SOUND_'..v]if not S:IsPlaying(s)then S:Play(s,1,0,false)end end for i=1,3 do I.Spawn(EntityType.ENTITY_EFFECT,EffectVariant.RAIN_DROP,0,I.GetRandomPosition(),Vector.Zero,nil):AddEntityFlags(EntityFlag.FLAG_PERSISTENT)end end)A(T,ModCallbacks.MC_POST_NEW_ROOM,function()local L,R=Game():GetLevel()R=L:GetRooms()for i=1,#R do local r=L:GetRoomByIdx(R:Get(i-1).SafeGridIndex)for k,v in pairs(P)do r[F]=O['FLAG_'..v]|r[F]end end end)\n--."}, "21.现代战争.lua": {"raw": "--现代战争\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 固定开启下列彩蛋种子：G_FUEL。\nl local S={SeedEffect.SEED_G_FUEL}Isaac.AddCallback({},ModCallbacks.MC_POST_UPDATE,function()local D,f=Game():GetSeeds()for _,d in pairs(S)do if D:CanAddSeedEffect(d)then D:AddSeedEffect(d)f=true end end if f then Isaac.ExecuteCommand('restart')end end)\n\n--2. 角色的下列属性不会超出限定的值（nil表示不做限制）：移速(nil~1.50)；弹速(nil~2.00)\nl local A,M,V,T,E=Isaac.AddCallback,ModCallbacks,{['MoveSpeed']={min=nil,max=1.50,F='SPEED'},['MaxFireDelay']={min=nil,max=nil,F='FIREDELAY'},['Damage']={min=nil,max=nil,F='DAMAGE'},['TearRange']={min=nil,max=nil,F='RANGE'},['ShotSpeed']={min=nil,max=2.00,F='SHOTSPEED'},['Luck']={min=nil,max=nil,F='LUCK'},['SpriteScale']={min=nil,max=nil,F='SIZE'}},{}E=function(p,k,v)local l,r=v.min,v.max if l and l>p[k]then p[k]=l end if r and r<p[k]then p[k]=r end end A(T,M.MC_EVALUATE_CACHE,function(_,p,f)for k,v in pairs(V)do if f==CacheFlag['CACHE_'..v.F]then return E(p,k,v)end end end)A(T,M.MC_POST_PEFFECT_UPDATE,function(_,p)for k,v in pairs(V)do E(p,k,v)end end)\n\n--3. 非任务道具替换为以下道具之一：道具-1(-1号错误道具)\nl local I,C=Isaac,{-1}I.AddCallback({},ModCallbacks.MC_POST_PICKUP_INIT,function(_,p)local s=p.SubType if not I.GetItemConfig():GetCollectible(s):HasTags(ItemConfig.TAG_QUEST)then for _,v in pairs(C)do if v==s then return end end local r=RNG()r:SetSeed(p.InitSeed,35)p:Morph(p.Type,p.Variant,C[r:RandomInt(#C)+1],true,true)end end,PickupVariant.PICKUP_COLLECTIBLE)\n\n--4. 初始给予玩家道具20-超凡升天,48丘比特之箭,96-查德宝宝,98-圣遗物\nl local I,G=Isaac,Game()I.AddCallback({},15,function(p,c,t,n)if not c then for _,i in pairs({20,48,96,98})do for k=1,G:GetNumPlayers()do p,t,n=I.GetPlayer(k-1),table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(t)do p:AddCollectible(t,I.GetItemConfig():GetCollectible(t).InitCharge)end end G:GetItemPool():RemoveCollectible(t)end end end)\n\n--5. 取消屏幕晃动\nl Isaac.AddCallback({},ModCallbacks.MC_POST_UPDATE,function()Game():ShakeScreen(0)end)\n--.", "cleaned": "--现代战争\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 固定开启下列彩蛋种子：G_FUEL。\nlocal S={SeedEffect.SEED_G_FUEL}Isaac.AddCallback({},ModCallbacks.MC_POST_UPDATE,function()local D,f=Game():GetSeeds()for _,d in pairs(S)do if D:CanAddSeedEffect(d)then D:AddSeedEffect(d)f=true end end if f then Isaac.ExecuteCommand('restart')end end)\n\n--2. 角色的下列属性不会超出限定的值（nil表示不做限制）：移速(nil~1.50)；弹速(nil~2.00)\nlocal A,M,V,T,E=Isaac.AddCallback,ModCallbacks,{['MoveSpeed']={min=nil,max=1.50,F='SPEED'},['MaxFireDelay']={min=nil,max=nil,F='FIREDELAY'},['Damage']={min=nil,max=nil,F='DAMAGE'},['TearRange']={min=nil,max=nil,F='RANGE'},['ShotSpeed']={min=nil,max=2.00,F='SHOTSPEED'},['Luck']={min=nil,max=nil,F='LUCK'},['SpriteScale']={min=nil,max=nil,F='SIZE'}},{}E=function(p,k,v)local l,r=v.min,v.max if l and l>p[k]then p[k]=l end if r and r<p[k]then p[k]=r end end A(T,M.MC_EVALUATE_CACHE,function(_,p,f)for k,v in pairs(V)do if f==CacheFlag['CACHE_'..v.F]then return E(p,k,v)end end end)A(T,M.MC_POST_PEFFECT_UPDATE,function(_,p)for k,v in pairs(V)do E(p,k,v)end end)\n\n--3. 非任务道具替换为以下道具之一：道具-1(-1号错误道具)\nlocal I,C=Isaac,{-1}I.AddCallback({},ModCallbacks.MC_POST_PICKUP_INIT,function(_,p)local s=p.SubType if not I.GetItemConfig():GetCollectible(s):HasTags(ItemConfig.TAG_QUEST)then for _,v in pairs(C)do if v==s then return end end local r=RNG()r:SetSeed(p.InitSeed,35)p:Morph(p.Type,p.Variant,C[r:RandomInt(#C)+1],true,true)end end,PickupVariant.PICKUP_COLLECTIBLE)\n\n--4. 初始给予玩家道具20-超凡升天,48丘比特之箭,96-查德宝宝,98-圣遗物\nlocal I,G=Isaac,Game()I.AddCallback({},15,function(p,c,t,n)if not c then for _,i in pairs({20,48,96,98})do for k=1,G:GetNumPlayers()do p,t,n=I.GetPlayer(k-1),table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(t)do p:AddCollectible(t,I.GetItemConfig():GetCollectible(t).InitCharge)end end G:GetItemPool():RemoveCollectible(t)end end end)\n\n--5. 取消屏幕晃动\nIsaac.AddCallback({},ModCallbacks.MC_POST_UPDATE,function()Game():ShakeScreen(0)end)\n--."}, "22.快刀游戏.lua": {"raw": "--快刀游戏\n--限定角色：堕化犹大\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nl Isaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--2. 强制给予玩家道具251(新手牌组)、467(手指)、534(书包)。\nl Isaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({251,467,534})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n\n--3. 初始给予玩家道具116(9伏特)、9*311(犹大的影子)、356(车载电池)、468(阴影)、619(长子权)。\nl local I,G=Isaac,Game()I.AddCallback({},15,function(p,c,t,n)if not c then for _,i in pairs({116,{311,9},356,468,619})do for k=1,G:GetNumPlayers()do p,t,n=I.GetPlayer(k-1),table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(t)do p:AddCollectible(t,I.GetItemConfig():GetCollectible(t).InitCharge)end end G:GetItemPool():RemoveCollectible(t)end end end)\n\n--4. 强制给予玩家饰品88(不!)。\nl Isaac.AddCallback({},31,function(a,p,b)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then b='Parent'a=p[b]p[b]=nil for _,i in pairs({88})do if not p:HasTrinket(i)then p:DropTrinket(p.Position+p.PositionOffset,true)p:AddTrinket(i)p:UseActiveItem(479,3339)end end p[b]=a end end)\n\n--5. 强制角色为堕化犹大。\nl Isaac.AddCallback({},ModCallbacks.MC_POST_PLAYER_UPDATE,function(_,p)local t=PlayerType.PLAYER_JUDAS_B if t~=p:GetPlayerType()then p:ChangePlayerType(t)end end)\n\n--6. 每隔一段时间强制切换玩家的某个槽位物品为道具暗仪刺刀、其他槽位为道具计划C或卡牌自杀之王。可在控制台输入 lua Duration = 数值 来调整切换间隔，数值单位为逻辑帧，默认90逻辑帧(3秒)。\nl Duration=90;local C,D,E,F,G,H,I,M,N,P,Q,S,T,A,U,V='GetFrameCount','ControlsCooldown','SetPocketActiveItem',0,0,math,Isaac,ModCallbacks,false,CollectibleType,Card.CARD_SUICIDE_KING,true,{}A,U,V=I.AddCallback,P.COLLECTIBLE_PLAN_C,P.COLLECTIBLE_DARK_ARTS A(T,M.MC_POST_PLAYER_UPDATE,function(_,p)local g,s,t=Game()if g[C](g)%Duration<1 then F=(F+H.random(1,5))%6 for i=0,3 do s,t=(i==F)and V or U,p:GetActiveItem(i)if s~=t or i>1 then p:RemoveCollectible(t,S,i,S)if i<2 then p:AddCollectible(s,I.GetItemConfig():GetCollectible(s).InitCharge,N,i)end end end for i=0,3 do if Q~=p:GetCard(i)then p:DropPocketItem(i,I.GetFreeNearPosition(p.Position+p.PositionOffset,9))end end G=(F>1)and F or G p[E](p,F>1 and V or U,2,N)p[E](p,U,3,N)for i=2,3 do p:SetCard(i,Q)end end end)A(T,M.MC_INPUT_ACTION,function(_,e,h,a)if e and e:ToPlayer()and a==ButtonAction.ACTION_DROP and G>0 then G=G-1 return S end end,InputHook.IS_ACTION_TRIGGERED)A(T,M.MC_POST_RENDER,function()local d,g,t,c,s=Duration,Game()t=(d-g[C](g)%d)/30 c,s=t*30/d,string.format('%.2fs',t)I.RenderText(s,(I.GetScreenWidth()-I.GetTextWidth(s))/2,I.GetScreenHeight()/16,1,c,c,1)end)A(T,M.MC_USE_ITEM,function(_,c,r,p)p[D]=H.max(p[D],180)end,U)A(T,M.MC_POST_PICKUP_INIT,function(_,e)if e.SubType==Q then e:Remove()end end,PickupVariant.PICKUP_TAROTCARD)\n--.", "cleaned": "--快刀游戏\n--限定角色：堕化犹大\n--输入下面的代码后，重新开始一局新游戏\n--除非重新加载了模组，否则不要重复输入代码！\n\n---- 代码效果(不用管中文，全选复制即可) ----\n\n--1. 所有玩家永久蒙眼（在矿洞逃亡中不生效）。\nIsaac.AddCallback({},31,function(s,p,g,c,f)f,s,g=1,'Challenge',Game()c=g[s]if p:HasCurseMistEffect()then g[s],f=0 p:TryRemoveNullCostume(14)elseif p:CanShoot()then g[s],f=6 p:AddNullCostume(14)end if not f then p:UpdateCanShoot()end g[s]=c end)\n\n--2. 强制给予玩家道具251(新手牌组)、467(手指)、534(书包)。\nIsaac.AddCallback({},31,function(c,p,n)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then for _,i in pairs({251,467,534})do c,n=table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(c)do p:AddCollectible(c,Isaac.GetItemConfig():GetCollectible(c).InitCharge)end Game():GetItemPool():RemoveCollectible(c)end end end)\n\n--3. 初始给予玩家道具116(9伏特)、9*311(犹大的影子)、356(车载电池)、468(阴影)、619(长子权)。\nlocal I,G=Isaac,Game()I.AddCallback({},15,function(p,c,t,n)if not c then for _,i in pairs({116,{311,9},356,468,619})do for k=1,G:GetNumPlayers()do p,t,n=I.GetPlayer(k-1),table.unpack(type(i)=='table'and i or{i,1})while n>p:GetCollectibleNum(t)do p:AddCollectible(t,I.GetItemConfig():GetCollectible(t).InitCharge)end end G:GetItemPool():RemoveCollectible(t)end end end)\n\n--4. 强制给予玩家饰品88(不!)。\nIsaac.AddCallback({},31,function(a,p,b)if 40~=p:GetPlayerType()and not p:HasCurseMistEffect()then b='Parent'a=p[b]p[b]=nil for _,i in pairs({88})do if not p:HasTrinket(i)then p:DropTrinket(p.Position+p.PositionOffset,true)p:AddTrinket(i)p:UseActiveItem(479,3339)end end p[b]=a end end)\n\n--5. 强制角色为堕化犹大。\nIsaac.AddCallback({},ModCallbacks.MC_POST_PLAYER_UPDATE,function(_,p)local t=PlayerType.PLAYER_JUDAS_B if t~=p:GetPlayerType()then p:ChangePlayerType(t)end end)\n\n--6. 每隔一段时间强制切换玩家的某个槽位物品为道具暗仪刺刀、其他槽位为道具计划C或卡牌自杀之王。可在控制台输入 lua Duration = 数值 来调整切换间隔，数值单位为逻辑帧，默认90逻辑帧(3秒)。\nDuration=90;local C,D,E,F,G,H,I,M,N,P,Q,S,T,A,U,V='GetFrameCount','ControlsCooldown','SetPocketActiveItem',0,0,math,Isaac,ModCallbacks,false,CollectibleType,Card.CARD_SUICIDE_KING,true,{}A,U,V=I.AddCallback,P.COLLECTIBLE_PLAN_C,P.COLLECTIBLE_DARK_ARTS A(T,M.MC_POST_PLAYER_UPDATE,function(_,p)local g,s,t=Game()if g[C](g)%Duration<1 then F=(F+H.random(1,5))%6 for i=0,3 do s,t=(i==F)and V or U,p:GetActiveItem(i)if s~=t or i>1 then p:RemoveCollectible(t,S,i,S)if i<2 then p:AddCollectible(s,I.GetItemConfig():GetCollectible(s).InitCharge,N,i)end end end for i=0,3 do if Q~=p:GetCard(i)then p:DropPocketItem(i,I.GetFreeNearPosition(p.Position+p.PositionOffset,9))end end G=(F>1)and F or G p[E](p,F>1 and V or U,2,N)p[E](p,U,3,N)for i=2,3 do p:SetCard(i,Q)end end end)A(T,M.MC_INPUT_ACTION,function(_,e,h,a)if e and e:ToPlayer()and a==ButtonAction.ACTION_DROP and G>0 then G=G-1 return S end end,InputHook.IS_ACTION_TRIGGERED)A(T,M.MC_POST_RENDER,function()local d,g,t,c,s=Duration,Game()t=(d-g[C](g)%d)/30 c,s=t*30/d,string.format('%.2fs',t)I.RenderText(s,(I.GetScreenWidth()-I.GetTextWidth(s))/2,I.GetScreenHeight()/16,1,c,c,1)end)A(T,M.MC_USE_ITEM,function(_,c,r,p)p[D]=H.max(p[D],180)end,U)A(T,M.MC_POST_PICKUP_INIT,function(_,e)if e.SubType==Q then e:Remove()end end,PickupVariant.PICKUP_TAROTCARD)\n--."}};
        const COLORS = ["#e74c3c", "#c0392b", "#d35400", "#e67e22", "#f39c12", "#2ecc71", 
                        "#27ae60", "#1abc9c", "#16a085", "#3498db", "#2980b9", "#9b59b6", "#8e44ad"];
        let currentFile = null;
        
        function isComment(l) {
            if (l.startsWith("l ")) l = l.slice(2);
            return l.trim().startsWith("--");
        }
        
        function showFile(n) {
        home.style.display = 'none';
        detail.style.display = 'flex';
        fileTitle.textContent = n;
        subLegend.textContent = n + " - @Keye3Tuido";

        lineNumbers.innerHTML = "";
        codeLines.innerHTML = "";
        let p = null;

        const lines = files[n].raw.split('\n');
        lines.forEach((l, i) => {
            // 行号列：用 DOM + textContent，避免模板插值
            const ln = document.createElement('div');
            ln.className = 'row';
            ln.textContent = i + 1;
            ln.onclick = () => copyLine(i);
            lineNumbers.appendChild(ln);

            // 代码列：用 DOM + textContent，确保 < 不被当作标签
            const row = document.createElement('div');
            row.className = 'row';
            row.onclick = () => copyLine(i);

            if (!l) {
            row.textContent = "";            // 空行
            p = null;
            } else if (isComment(l)) {
            let c;
            do c = COLORS[Math.floor(Math.random() * COLORS.length)];
            while (c === p);
            p = c;
            row.className = 'row comment';
            row.style.color = c;
            row.textContent = l;             // 关键：纯文本渲染
            } else {
            row.textContent = l;             // 关键：纯文本渲染
            p = null;
            }

            codeLines.appendChild(row);
        });

        currentFile = n;
        }
 
        function showHome() {
            detail.style.display = 'none';
            home.style.display = 'block';
            currentFile = null;
        }
        
        function copyLine(i) {
            const l = codeLines.children[i]?.textContent;
            if (l) navigator.clipboard.writeText(l)
                .then(() => showToast("已复制第 " + (i + 1) + " 行"))
                .catch(e => showToast("复制失败:" + e));
        }
        
        function copyToClipboard() {
            if (currentFile) navigator.clipboard.writeText(files[currentFile].raw)
                .then(() => showToast("已复制代码到剪贴板"))
                .catch(() => showToast("复制失败"));
        }
        
        function downloadLua() {
            if (!currentFile) return;
            const num = currentFile.split('.')[0];
            const b = new Blob([files[currentFile].cleaned], {type: 'text/plain'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(b);
            a.download = 'code' + num + '.lua';
            a.click();
            URL.revokeObjectURL(a.href);
        }
        
        function handleSearch() {
            const t = searchInput.value.toLowerCase();
            for (const item of fileList.children)
                item.style.display = item.getAttribute('data-search').toLowerCase().includes(t) ? 'grid' : 'none';
        }
        
        function showToast(m) {
            toast.textContent = m;
            toast.style.display = 'block';
            toast.style.opacity = 1;
            setTimeout(() => {
                toast.style.opacity = 0;
                toast.style.display = 'none';
            }, 2000);
        }
    </script>
</body>
</html>
